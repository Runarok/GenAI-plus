
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Main Menu Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts: Orbitron for titles, Roboto for body -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #181a20;
      --panel: #23262f;
      --accent: #00ffe7;
      --accent2: #ff00c8;
      --text: #f5f6fa;
      --link: #00ffe7;
      --link-hover: #ff00c8;
      --transition: 0.2s cubic-bezier(.4,0,.2,1);
      --radius: 14px;
      --shadow: 0 4px 24px 0 rgba(0,0,0,0.4);
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Roboto', Arial, sans-serif;
      min-height: 100vh;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      background: linear-gradient(135deg, #181a20 60%, #23262f 100%);
    }
    header {
      margin-top: 2rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      letter-spacing: 0.08em;
      color: var(--accent);
      text-shadow: 0 2px 16px #00ffe7aa;
      margin: 0 0 0.5rem 0;
    }
    .section-toggle {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .section-btn {
      background: var(--panel);
      color: var(--accent);
      border: none;
      border-radius: var(--radius);
      padding: 0.7em 1.5em;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: background var(--transition), color var(--transition), box-shadow var(--transition), transform var(--transition);
      outline: none;
      position: relative;
    }
    .section-btn.active, .section-btn:focus-visible {
      background: var(--accent2);
      color: #fff;
      box-shadow: 0 0 0 3px var(--accent2), var(--shadow);
      z-index: 1;
    }
    .section-btn:hover:not(.active) {
      color: var(--accent2);
      background: #23262f;
      transform: translateY(-2px) scale(1.04);
      box-shadow: 0 2px 16px 0 var(--accent2), var(--shadow);
    }
    main {
      width: 100%;
      max-width: 900px;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
    }
    .section-panel {
      display: none;
      flex-direction: column;
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem 1.5rem 2.5rem 1.5rem;
      margin-bottom: 2rem;
      animation: fadeIn 0.4s;
    }
    .section-panel.active {
      display: flex;
    }
    .section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.6rem;
      color: var(--accent2);
      margin-bottom: 1.2rem;
      letter-spacing: 0.04em;
      text-shadow: 0 1px 8px #ff00c888;
    }
    .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.2rem;
      width: 100%;
    }
    .menu-link {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: #1a1c23;
      border-radius: var(--radius);
      padding: 1.1em 1em;
      text-decoration: none;
      color: var(--link);
      font-size: 1.08rem;
      font-family: 'Roboto', sans-serif;
      font-weight: 500;
      box-shadow: 0 2px 12px 0 #00ffe733;
      border: 2px solid transparent;
      transition: 
        background var(--transition), 
        color var(--transition), 
        border-color var(--transition), 
        box-shadow var(--transition), 
        transform var(--transition);
      position: relative;
      overflow: hidden;
    }
    .menu-link:focus-visible {
      border-color: var(--accent2);
      color: #fff;
      background: #23262f;
      outline: none;
      z-index: 2;
    }
    .menu-link:hover, .menu-link:active {
      color: #fff;
      background: linear-gradient(90deg, #00ffe7 0%, #ff00c8 100%);
      background-size: 200% 100%;
      background-position: right center;
      box-shadow: 0 4px 24px 0 #00ffe7aa, 0 2px 12px 0 #ff00c888;
      border-color: var(--accent2);
      transform: translateY(-2px) scale(1.03);
    }
    .menu-link .desc {
      font-size: 0.93rem;
      color: #b2f7f7;
      margin-top: 0.3em;
      opacity: 0.8;
      font-weight: 400;
    }
    @media (max-width: 600px) {
      .links-grid {
        grid-template-columns: 1fr;
      }
      .section-panel {
        padding: 1.2rem 0.5rem 1.5rem 0.5rem;
      }
      header {
        margin-top: 1.2rem;
      }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(16px);}
      to { opacity: 1; transform: none;}
    }
  </style>
</head>
<body>
  <header>
    <h1>Main Menu Hub</h1>
    <div class="section-toggle" id="section-toggle" role="tablist" aria-label="Main menu sections"></div>
  </header>
  <main id="main-content"></main>
  <script>
    // Menu data structure
    const menuData = [
      {
        id: "games",
        title: "Games",
        links: [
          { label: "2048", url: "2048.html", desc: "Classic tile merging puzzle." },
          { label: "Snake", url: "snake.html", desc: "Retro snake game." },
          { label: "Minesweeper", url: "minesweeper.html", desc: "Find the mines!" },
          { label: "Tetris", url: "tetris.html", desc: "Block stacking fun." }
        ]
      },
      {
        id: "tools",
        title: "Tools",
        links: [
          { label: "Calculator", url: "calculator.html", desc: "Simple math calculator." },
          { label: "Unit Converter", url: "converter.html", desc: "Convert units easily." },
          { label: "Markdown Editor", url: "markdown.html", desc: "Write and preview markdown." }
        ]
      },
      {
        id: "experiments",
        title: "Experiments",
        links: [
          { label: "Particle Playground", url: "particles.html", desc: "Interactive particle demo." },
          { label: "AI Chat", url: "chat.html", desc: "Conversational AI bot." },
          { label: "Audio Visualizer", url: "visualizer.html", desc: "Music meets visuals." }
        ]
      },
      {
        id: "about",
        title: "About",
        links: [
          { label: "Project Info", url: "about.html", desc: "Learn more about this hub." },
          { label: "Contact", url: "contact.html", desc: "Get in touch." }
        ]
      }
    ];

    // Utility: get URL param
    function getParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    // DOM refs
    const sectionToggle = document.getElementById('section-toggle');
    const mainContent = document.getElementById('main-content');

    // State
    let currentSectionIdx = 0;

    // Build section toggle buttons
    function buildSectionToggles() {
      sectionToggle.innerHTML = '';
      menuData.forEach((section, idx) => {
        const btn = document.createElement('button');
        btn.className = 'section-btn';
        btn.type = 'button';
        btn.setAttribute('role', 'tab');
        btn.setAttribute('aria-selected', idx === currentSectionIdx ? 'true' : 'false');
        btn.setAttribute('tabindex', idx === currentSectionIdx ? '0' : '-1');
        btn.textContent = section.title;
        btn.dataset.idx = idx;
        btn.id = `section-btn-${section.id}`;
        btn.addEventListener('click', () => showSection(idx, true));
        sectionToggle.appendChild(btn);
      });
    }

    // Build section panels
    function buildSections() {
      mainContent.innerHTML = '';
      menuData.forEach((section, idx) => {
        const panel = document.createElement('section');
        panel.className = 'section-panel' + (idx === currentSectionIdx ? ' active' : '');
        panel.setAttribute('role', 'tabpanel');
        panel.setAttribute('aria-labelledby', `section-btn-${section.id}`);
        panel.id = `section-panel-${section.id}`;
        if (idx !== currentSectionIdx) panel.setAttribute('hidden', 'hidden');

        const title = document.createElement('div');
        title.className = 'section-title';
        title.textContent = section.title;
        panel.appendChild(title);

        const grid = document.createElement('div');
        grid.className = 'links-grid';

        section.links.forEach(link => {
          const a = document.createElement('a');
          a.className = 'menu-link';
          a.href = link.url;
          a.tabIndex = 0;
          a.innerHTML = `<span>${link.label}</span>` +
                        (link.desc ? `<span class="desc">${link.desc}</span>` : '');
          grid.appendChild(a);
        });

        panel.appendChild(grid);
        mainContent.appendChild(panel);
      });
    }

    // Show section by index
    function showSection(idx, focusBtn = false) {
      if (idx < 0 || idx >= menuData.length) return;
      currentSectionIdx = idx;
      // Update buttons
      Array.from(sectionToggle.children).forEach((btn, i) => {
        btn.classList.toggle('active', i === idx);
        btn.setAttribute('aria-selected', i === idx ? 'true' : 'false');
        btn.setAttribute('tabindex', i === idx ? '0' : '-1');
        if (i === idx && focusBtn) btn.focus();
      });
      // Update panels
      Array.from(mainContent.children).forEach((panel, i) => {
        panel.classList.toggle('active', i === idx);
        if (i === idx) {
          panel.removeAttribute('hidden');
        } else {
          panel.setAttribute('hidden', 'hidden');
        }
      });
    }

    // Keyboard navigation for section toggles
    sectionToggle.addEventListener('keydown', (e) => {
      const len = menuData.length;
      let handled = false;
      if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {
        showSection((currentSectionIdx - 1 + len) % len, true);
        handled = true;
      } else if (['ArrowRight', 'ArrowDown'].includes(e.key)) {
        showSection((currentSectionIdx + 1) % len, true);
        handled = true;
      } else if (e.key === 'Home') {
        showSection(0, true);
        handled = true;
      } else if (e.key === 'End') {
        showSection(len - 1, true);
        handled = true;
      }
      if (handled) {
        e.preventDefault();
      }
    });

    // Touch swipe navigation for sections
    let touchStartX = null;
    let touchStartY = null;
    mainContent.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
      }
    });
    mainContent.addEventListener('touchend', (e) => {
      if (touchStartX === null || touchStartY === null) return;
      const dx = e.changedTouches[0].clientX - touchStartX;
      const dy = e.changedTouches[0].clientY - touchStartY;
      if (Math.abs(dx) > 60 && Math.abs(dx) > Math.abs(dy)) {
        // Horizontal swipe
        if (dx < 0) {
          // Swipe left: next section
          showSection((currentSectionIdx + 1) % menuData.length, true);
        } else {
          // Swipe right: prev section
          showSection((currentSectionIdx - 1 + menuData.length) % menuData.length, true);
        }
      }
      touchStartX = touchStartY = null;
    });

    // Keyboard navigation for links inside a section
    mainContent.addEventListener('keydown', (e) => {
      if (!['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(e.key)) return;
      const activePanel = mainContent.querySelector('.section-panel.active');
      if (!activePanel) return;
      const links = Array.from(activePanel.querySelectorAll('.menu-link'));
      if (!links.length) return;
      const focusedIdx = links.findIndex(link => link === document.activeElement);
      let nextIdx = focusedIdx;
      if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
        nextIdx = (focusedIdx + 1) % links.length;
      } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
        nextIdx = (focusedIdx - 1 + links.length) % links.length;
      }
      if (nextIdx !== focusedIdx) {
        links[nextIdx].focus();
        e.preventDefault();
      }
    });

    // Support URL param: ?section=tools
    function getSectionIdxFromParam() {
      const param = getParam('section');
      if (!param) return 0;
      const idx = menuData.findIndex(sec => sec.id.toLowerCase() === param.toLowerCase());
      return idx >= 0 ? idx : 0;
    }

    // Initial render
    function renderMenu() {
      currentSectionIdx = getSectionIdxFromParam();
      buildSectionToggles();
      buildSections();
      showSection(currentSectionIdx);
    }

    renderMenu();

    // Optional: update section if URL hash/param changes
    window.addEventListener('popstate', () => {
      const idx = getSectionIdxFromParam();
      if (idx !== currentSectionIdx) showSection(idx, true);
    });
  </script>
</body>
</html>
