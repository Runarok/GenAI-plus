<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Main Menu Hub</title>
  <!-- Google Fonts: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #181a20;
      --card: #23262f;
      --accent: #00e6e6;
      --accent2: #00b3b3;
      --text: #f1f1f1;
      --subtle: #2c2f36;
      --radius: 14px;
      --transition: 0.18s cubic-bezier(.4,0,.2,1);
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
    }
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .menu-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 32px 12px 24px 12px;
      max-width: 900px;
      margin: 0 auto;
    }
    .section-toggle-bar {
      display: flex;
      gap: 16px;
      margin-bottom: 32px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .section-toggle-btn {
      background: var(--card);
      color: var(--accent);
      border: none;
      border-radius: var(--radius);
      padding: 12px 28px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: background var(--transition), color var(--transition), box-shadow var(--transition);
      box-shadow: 0 2px 8px 0 #0002;
      outline: none;
    }
    .section-toggle-btn.active, .section-toggle-btn:focus-visible {
      background: var(--accent);
      color: var(--bg);
      box-shadow: 0 4px 16px 0 #00e6e633;
    }
    .sections-area {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 32px;
      align-items: stretch;
    }
    .section-content {
      display: flex;
      flex-direction: column;
      gap: 32px;
      animation: fadeIn 0.4s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(16px);}
      to { opacity: 1; transform: none;}
    }
    .subsection-group {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px 20px 18px 20px;
      box-shadow: 0 2px 12px 0 #0003;
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .subsection-title {
      color: var(--accent);
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: 0.01em;
    }
    .links-row {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }
    .menu-link {
      background: var(--subtle);
      color: var(--text);
      border-radius: 8px;
      padding: 10px 20px;
      text-decoration: none;
      font-weight: 500;
      font-size: 1rem;
      transition: background var(--transition), color var(--transition), box-shadow var(--transition);
      box-shadow: 0 1px 4px 0 #0002;
      position: relative;
      outline: none;
      border: none;
      display: inline-block;
    }
    .menu-link:hover, .menu-link:focus-visible {
      background: var(--accent2);
      color: var(--bg);
      box-shadow: 0 2px 12px 0 #00e6e633;
      text-decoration: none;
    }
    @media (max-width: 700px) {
      .menu-container {
        padding: 18px 2vw 12px 2vw;
      }
      .subsection-group {
        padding: 16px 8px 12px 8px;
      }
      .links-row {
        gap: 8px;
      }
    }
    @media (max-width: 500px) {
      .section-toggle-bar {
        gap: 8px;
      }
      .section-toggle-btn {
        padding: 10px 12px;
        font-size: 1rem;
      }
      .subsection-title {
        font-size: 1rem;
      }
      .menu-link {
        padding: 8px 10px;
        font-size: 0.98rem;
      }
    }
  </style>
</head>
<body>
  <div class="menu-container">
    <div class="section-toggle-bar" id="sectionToggleBar"></div>
    <div class="sections-area">
      <div class="section-content" id="sectionContent"></div>
    </div>
  </div>
  <script>
    // ====== MENU DATA STRUCTURE ======
    // To modify the menu, edit the 'menuData' object below.
    // Add/remove sections, subsections, or links as needed.
    const menuData = {
      "Games": {
        "Puzzles": [
          { title: "Sudoku", url: "sudoku.html" },
          { title: "Nonograms", url: "nonograms.html" }
        ],
        "Reflex": [
          { title: "Reaction Test", url: "reaction.html" },
          { title: "Aim Trainer", url: "aim.html" }
        ]
      },
      "Tools": {
        "Converters": [
          { title: "Unit Converter", url: "unit-converter.html" },
          { title: "Color Picker", url: "color-picker.html" }
        ],
        "Productivity": [
          { title: "Pomodoro Timer", url: "pomodoro.html" },
          { title: "Notes", url: "notes.html" }
        ]
      },
      "Projects": {
        "Web Apps": [
          { title: "Markdown Editor", url: "markdown.html" },
          { title: "Portfolio", url: "portfolio.html" }
        ],
        "Experiments": [
          { title: "Canvas Doodles", url: "canvas.html" }
        ]
      }
    };
    // ===== END MENU DATA STRUCTURE =====

    // --- Utility: Get section names
    const sectionNames = Object.keys(menuData);

    // --- State
    let currentSectionIdx = 0;

    // --- DOM Elements
    const sectionToggleBar = document.getElementById('sectionToggleBar');
    const sectionContent = document.getElementById('sectionContent');

    // --- Render Section Toggle Buttons
    function renderSectionToggles() {
      sectionToggleBar.innerHTML = '';
      sectionNames.forEach((name, idx) => {
        const btn = document.createElement('button');
        btn.className = 'section-toggle-btn' + (idx === currentSectionIdx ? ' active' : '');
        btn.textContent = name;
        btn.setAttribute('data-section-idx', idx);
        btn.tabIndex = 0;
        btn.addEventListener('click', () => {
          setSection(idx, true);
        });
        sectionToggleBar.appendChild(btn);
      });
    }

    // --- Render Section Content
    function renderSectionContent(idx) {
      const sectionName = sectionNames[idx];
      const section = menuData[sectionName];
      sectionContent.innerHTML = '';
      for (const [subName, links] of Object.entries(section)) {
        const group = document.createElement('div');
        group.className = 'subsection-group';

        const subTitle = document.createElement('div');
        subTitle.className = 'subsection-title';
        subTitle.textContent = subName;
        group.appendChild(subTitle);

        const linksRow = document.createElement('div');
        linksRow.className = 'links-row';
        links.forEach(link => {
          const a = document.createElement('a');
          a.className = 'menu-link';
          a.href = link.url;
          a.textContent = link.title;
          a.tabIndex = 0;
          linksRow.appendChild(a);
        });
        group.appendChild(linksRow);
        sectionContent.appendChild(group);
      }
    }

    // --- Set Section (by index)
    function setSection(idx, updateURL = false) {
      if (idx < 0 || idx >= sectionNames.length) return;
      currentSectionIdx = idx;
      renderSectionToggles();
      renderSectionContent(idx);
      if (updateURL) {
        const params = new URLSearchParams(window.location.search);
        params.set('section', sectionNames[idx]);
        history.replaceState(null, '', '?' + params.toString());
      }
      // Focus first toggle button for accessibility
      const activeBtn = sectionToggleBar.querySelector('.section-toggle-btn.active');
      if (activeBtn) activeBtn.focus();
    }

    // --- Parse section from URL
    function getSectionFromURL() {
      const params = new URLSearchParams(window.location.search);
      const section = params.get('section');
      if (section && sectionNames.includes(section)) {
        return sectionNames.indexOf(section);
      }
      return 0;
    }

    // --- Keyboard Navigation (A/D or Arrow keys)
    function handleKeyNav(e) {
      if (['ArrowLeft', 'ArrowRight', 'a', 'd', 'A', 'D'].includes(e.key)) {
        let dir = 0;
        if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') dir = -1;
        if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') dir = 1;
        if (dir !== 0) {
          let nextIdx = (currentSectionIdx + dir + sectionNames.length) % sectionNames.length;
          setSection(nextIdx, true);
          e.preventDefault();
        }
      }
    }
    window.addEventListener('keydown', handleKeyNav);

    // --- Swipe Support (Mobile)
    let touchStartX = null;
    sectionContent.addEventListener('touchstart', e => {
      if (e.touches.length === 1) touchStartX = e.touches[0].clientX;
    });
    sectionContent.addEventListener('touchend', e => {
      if (touchStartX === null) return;
      const touchEndX = e.changedTouches[0].clientX;
      const dx = touchEndX - touchStartX;
      if (Math.abs(dx) > 60) {
        if (dx < 0) { // swipe left
          setSection((currentSectionIdx + 1) % sectionNames.length, true);
        } else { // swipe right
          setSection((currentSectionIdx - 1 + sectionNames.length) % sectionNames.length, true);
        }
      }
      touchStartX = null;
    });

    // --- Initial Render
    window.addEventListener('DOMContentLoaded', () => {
      currentSectionIdx = getSectionFromURL();
      renderSectionToggles();
      renderSectionContent(currentSectionIdx);
    });
  </script>
</body>
</html>
