<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Simon Says Memory Game</title>
  <style>
    :root {
      --color-bg-dark: #181c24;
      --color-bg-light: #f6f7fb;
      --color-panel-dark: #23283a;
      --color-panel-light: #fff;
      --color-text-dark: #e6eaf3;
      --color-text-light: #23283a;
      --color-red: #ff4b5c;
      --color-green: #3ae374;
      --color-blue: #18dcff;
      --color-yellow: #ffd32a;
      --glow-red: 0 0 24px 6px #ff4b5c99;
      --glow-green: 0 0 24px 6px #3ae37499;
      --glow-blue: 0 0 24px 6px #18dcff99;
      --glow-yellow: 0 0 24px 6px #ffd32a99;
      --transition: 0.18s cubic-bezier(.4,0,.2,1);
    }
    body {
      background: var(--color-bg-dark);
      color: var(--color-text-dark);
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: background var(--transition), color var(--transition);
    }
    body.light {
      background: var(--color-bg-light);
      color: var(--color-text-light);
    }
    .container {
      background: var(--color-panel-dark);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px 0 #00000040;
      padding: 2.5rem 2rem 2rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 320px;
      max-width: 95vw;
      transition: background var(--transition);
    }
    body.light .container {
      background: var(--color-panel-light);
      box-shadow: 0 8px 32px 0 #b0b0b040;
    }
    .scoreboard {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 1.2rem;
      font-size: 1.1rem;
      letter-spacing: 0.02em;
      font-weight: 500;
    }
    .theme-toggle {
      position: absolute;
      top: 1.2rem;
      right: 1.5rem;
      background: none;
      border: none;
      font-size: 1.7rem;
      cursor: pointer;
      color: inherit;
      outline: none;
      transition: color var(--transition);
      z-index: 10;
      filter: drop-shadow(0 2px 6px #00000030);
    }
    .simon-board {
      display: grid;
      grid-template-columns: repeat(2, 90px);
      grid-template-rows: repeat(2, 90px);
      gap: 18px;
      margin: 0 auto 2rem auto;
      user-select: none;
      touch-action: manipulation;
    }
    @media (max-width: 500px) {
      .container {
        padding: 1.2rem 0.5rem 1.5rem 0.5rem;
        min-width: unset;
      }
      .simon-board {
        grid-template-columns: repeat(2, 32vw);
        grid-template-rows: repeat(2, 32vw);
        gap: 4vw;
      }
    }
    .simon-btn {
      border: none;
      border-radius: 1.2rem;
      box-shadow: 0 2px 16px 0 #00000030;
      width: 90px;
      height: 90px;
      font-size: 0;
      cursor: pointer;
      outline: none;
      transition: filter var(--transition), box-shadow var(--transition), transform 0.08s;
      filter: brightness(0.95) blur(0.2px);
      position: relative;
      z-index: 1;
      will-change: filter, box-shadow, transform;
    }
    .simon-btn.red {
      background: linear-gradient(135deg, #ff4b5c 80%, #ff7b8a 100%);
      box-shadow: var(--glow-red);
    }
    .simon-btn.green {
      background: linear-gradient(135deg, #3ae374 80%, #7fffa1 100%);
      box-shadow: var(--glow-green);
    }
    .simon-btn.blue {
      background: linear-gradient(135deg, #18dcff 80%, #6befff 100%);
      box-shadow: var(--glow-blue);
    }
    .simon-btn.yellow {
      background: linear-gradient(135deg, #ffd32a 80%, #fff685 100%);
      box-shadow: var(--glow-yellow);
    }
    .simon-btn:active,
    .simon-btn.active {
      filter: brightness(1.25) blur(0px) drop-shadow(0 0 16px #fff8);
      transform: scale(1.06);
      box-shadow: 0 0 32px 8px #fff4;
      z-index: 2;
    }
    .simon-btn.disabled {
      pointer-events: none;
      opacity: 0.6;
      filter: grayscale(0.2) brightness(0.85);
    }
    .game-title {
      font-size: 2.1rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      margin-bottom: 1.1rem;
      text-align: center;
      text-shadow: 0 2px 12px #00000030;
      user-select: none;
    }
    .game-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 1.2rem;
      gap: 0.7rem;
    }
    .start-btn {
      background: linear-gradient(90deg, #23283a 60%, #3ae374 100%);
      color: #fff;
      border: none;
      border-radius: 0.8rem;
      padding: 0.7rem 2.2rem;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.03em;
      cursor: pointer;
      box-shadow: 0 2px 12px #3ae37440;
      transition: background var(--transition), box-shadow var(--transition), color var(--transition);
      outline: none;
    }
    .start-btn:active {
      background: linear-gradient(90deg, #3ae374 60%, #23283a 100%);
      color: #23283a;
      box-shadow: 0 2px 18px #3ae37480;
    }
    .game-over {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 1.2rem;
      animation: fadeIn 0.5s;
    }
    .game-over-title {
      font-size: 1.7rem;
      font-weight: 700;
      color: #ff4b5c;
      margin-bottom: 0.5rem;
      text-shadow: 0 2px 12px #ff4b5c40;
    }
    .game-over-score {
      font-size: 1.1rem;
      color: #e6eaf3;
      margin-bottom: 1.1rem;
    }
    .game-over .start-btn {
      background: linear-gradient(90deg, #23283a 60%, #ff4b5c 100%);
      box-shadow: 0 2px 12px #ff4b5c40;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(16px);}
      to { opacity: 1; transform: translateY(0);}
    }
    /* Hide number input arrows on mobile */
    input[type=number]::-webkit-inner-spin-button, 
    input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
  </style>
</head>
<body>
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">ðŸŒ™</button>
  <div class="container">
    <div class="game-title">Simon Says</div>
    <div class="scoreboard">
      <span>Score: <span id="score">0</span></span>
      <span>High: <span id="high-score">0</span></span>
    </div>
    <div class="simon-board" id="simon-board">
      <button class="simon-btn red" data-color="red" aria-label="Red"></button>
      <button class="simon-btn green" data-color="green" aria-label="Green"></button>
      <button class="simon-btn blue" data-color="blue" aria-label="Blue"></button>
      <button class="simon-btn yellow" data-color="yellow" aria-label="Yellow"></button>
    </div>
    <div class="game-controls" id="game-controls">
      <button class="start-btn" id="start-btn">Start</button>
    </div>
    <div class="game-over" id="game-over" style="display:none;">
      <div class="game-over-title">Game Over</div>
      <div class="game-over-score" id="game-over-score"></div>
      <button class="start-btn" id="restart-btn">Restart</button>
    </div>
  </div>
  <audio id="audio-red" src="https://cdn.jsdelivr.net/gh/robinsonkwame/simon-sounds/red.mp3" preload="auto"></audio>
  <audio id="audio-green" src="https://cdn.jsdelivr.net/gh/robinsonkwame/simon-sounds/green.mp3" preload="auto"></audio>
  <audio id="audio-blue" src="https://cdn.jsdelivr.net/gh/robinsonkwame/simon-sounds/blue.mp3" preload="auto"></audio>
  <audio id="audio-yellow" src="https://cdn.jsdelivr.net/gh/robinsonkwame/simon-sounds/yellow.mp3" preload="auto"></audio>
  <audio id="audio-wrong" src="https://cdn.jsdelivr.net/gh/robinsonkwame/simon-sounds/wrong.mp3" preload="auto"></audio>
  <script>
    // --- Theme Management ---
    const themeToggle = document.getElementById('theme-toggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    function setTheme(theme) {
      if (theme === 'light') {
        document.body.classList.add('light');
        themeToggle.textContent = 'ðŸŒž';
      } else {
        document.body.classList.remove('light');
        themeToggle.textContent = 'ðŸŒ™';
      }
      localStorage.setItem('simon-theme', theme);
    }
    function getSavedTheme() {
      return localStorage.getItem('simon-theme');
    }
    // On load, set theme
    (function() {
      const saved = getSavedTheme();
      if (saved) setTheme(saved);
      else setTheme('dark');
    })();
    themeToggle.addEventListener('click', () => {
      const isLight = document.body.classList.contains('light');
      setTheme(isLight ? 'dark' : 'light');
    });

    // --- Game Logic ---
    const COLORS = ['red', 'green', 'blue', 'yellow'];
    const board = document.getElementById('simon-board');
    const btns = {
      red: board.querySelector('.simon-btn.red'),
      green: board.querySelector('.simon-btn.green'),
      blue: board.querySelector('.simon-btn.blue'),
      yellow: board.querySelector('.simon-btn.yellow')
    };
    const audios = {
      red: document.getElementById('audio-red'),
      green: document.getElementById('audio-green'),
      blue: document.getElementById('audio-blue'),
      yellow: document.getElementById('audio-yellow'),
      wrong: document.getElementById('audio-wrong')
    };
    const scoreEl = document.getElementById('score');
    const highScoreEl = document.getElementById('high-score');
    const startBtn = document.getElementById('start-btn');
    const restartBtn = document.getElementById('restart-btn');
    const gameOverEl = document.getElementById('game-over');
    const gameOverScoreEl = document.getElementById('game-over-score');
    const gameControls = document.getElementById('game-controls');

    let sequence = [];
    let userStep = 0;
    let playing = false;
    let score = 0;
    let highScore = 0;
    let allowInput = false;

    // --- Storage ---
    function getHighScore() {
      return parseInt(localStorage.getItem('simon-highscore') || '0', 10);
    }
    function setHighScore(val) {
      localStorage.setItem('simon-highscore', val);
    }
    function updateScoreboard() {
      scoreEl.textContent = score;
      highScoreEl.textContent = highScore;
    }

    // --- Button/Sound Feedback ---
    function playSound(color) {
      if (audios[color]) {
        audios[color].currentTime = 0;
        audios[color].play();
      }
    }
    function flashButton(color, duration=350) {
      return new Promise(resolve => {
        btns[color].classList.add('active');
        playSound(color);
        setTimeout(() => {
          btns[color].classList.remove('active');
          setTimeout(resolve, 80);
        }, duration);
      });
    }
    function disableButtons() {
      Object.values(btns).forEach(btn => btn.classList.add('disabled'));
    }
    function enableButtons() {
      Object.values(btns).forEach(btn => btn.classList.remove('disabled'));
    }

    // --- Game Flow ---
    function resetGame() {
      sequence = [];
      userStep = 0;
      score = 0;
      updateScoreboard();
      gameOverEl.style.display = 'none';
      gameControls.style.display = '';
      enableButtons();
    }
    function startGame() {
      resetGame();
      playing = true;
      nextRound();
    }
    function nextRound() {
      allowInput = false;
      sequence.push(COLORS[Math.floor(Math.random() * 4)]);
      score = sequence.length - 1;
      updateScoreboard();
      setTimeout(() => playSequence(), 600);
    }
    async function playSequence() {
      disableButtons();
      for (let i = 0; i < sequence.length; i++) {
        await flashButton(sequence[i]);
      }
      userStep = 0;
      allowInput = true;
      enableButtons();
    }
    function handleUserInput(color) {
      if (!playing || !allowInput) return;
      playSound(color);
      if (color === sequence[userStep]) {
        userStep++;
        if (userStep === sequence.length) {
          allowInput = false;
          setTimeout(nextRound, 700);
        }
      } else {
        gameOver();
      }
    }
    function gameOver() {
      playing = false;
      allowInput = false;
      playSound('wrong');
      disableButtons();
      if (score > highScore) {
        highScore = score;
        setHighScore(highScore);
      }
      updateScoreboard();
      gameOverScoreEl.textContent = `Your Score: ${score}`;
      gameOverEl.style.display = '';
      gameControls.style.display = 'none';
      // Subtle shake animation
      board.animate([
        { transform: 'translateX(0)' },
        { transform: 'translateX(-8px)' },
        { transform: 'translateX(8px)' },
        { transform: 'translateX(0)' }
      ], { duration: 350, easing: 'ease' });
    }

    // --- Event Listeners ---
    Object.entries(btns).forEach(([color, btn]) => {
      btn.addEventListener('mousedown', () => {
        if (allowInput && !btn.classList.contains('disabled')) {
          btn.classList.add('active');
        }
      });
      btn.addEventListener('mouseup', () => {
        btn.classList.remove('active');
      });
      btn.addEventListener('mouseleave', () => {
        btn.classList.remove('active');
      });
      btn.addEventListener('touchstart', (e) => {
        if (allowInput && !btn.classList.contains('disabled')) {
          btn.classList.add('active');
        }
      }, {passive:true});
      btn.addEventListener('touchend', (e) => {
        btn.classList.remove('active');
      });
      btn.addEventListener('click', () => {
        if (allowInput && !btn.classList.contains('disabled')) {
          handleUserInput(color);
        }
      });
    });
    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', startGame);

    // --- Keyboard Support (optional) ---
    document.addEventListener('keydown', (e) => {
      if (!allowInput) return;
      const keyMap = { r: 'red', g: 'green', b: 'blue', y: 'yellow' };
      const color = keyMap[e.key.toLowerCase()];
      if (color) {
        btns[color].classList.add('active');
        handleUserInput(color);
        setTimeout(() => btns[color].classList.remove('active'), 180);
      }
    });

    // --- On Load: Set High Score ---
    (function() {
      highScore = getHighScore();
      updateScoreboard();
      disableButtons();
    })();
  </script>
</body>
</html>

