<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Programming Study Companion</title>
    <link rel="icon" href="https://raw.githubusercontent.com/Runarok/GenAI-plus/main/GenAI-plus.png" type="image/png">
    <style>
        :root {
            /* Dark mode variables (default) */
            --bg-primary: #0a0a0f;
            --bg-secondary: #13131a;
            --bg-glass: rgba(20, 20, 30, 0.7);
            --bg-glass-hover: rgba(30, 30, 45, 0.85);
            --text-primary: #e8e8f0;
            --text-secondary: #a8a8b8;
            --text-muted: #707080;
            --accent-primary: #5b9bff;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --border-color: rgba(255, 255, 255, 0.1);
            --glow-color: rgba(91, 155, 255, 0.3);
            --shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-soft: 0 4px 16px rgba(0, 0, 0, 0.2);
            
            /* Legacy support */
            --tcl-primary: #5b9bff;
            --tcl-bg: rgba(91, 155, 255, 0.1);
            --tcl-border: #5b9bff;
            --c-primary: #10b981;
            --c-bg: rgba(16, 185, 129, 0.1);
            --c-border: #10b981;
            --code-bg: #13131a;
            --code-text: #e8e8f0;
            --highlight: #fef08a;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] {
            --bg-primary: #f5f5f7;
            --bg-secondary: #ffffff;
            --bg-glass: rgba(255, 255, 255, 0.7);
            --bg-glass-hover: rgba(255, 255, 255, 0.9);
            --text-primary: #1d1d1f;
            --text-secondary: #515154;
            --text-muted: #86868b;
            --accent-primary: #0071e3;
            --accent-secondary: #7c3aed;
            --accent-success: #059669;
            --border-color: rgba(0, 0, 0, 0.1);
            --glow-color: rgba(0, 113, 227, 0.2);
            --shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.15);
            --shadow-soft: 0 4px 16px rgba(0, 0, 0, 0.08);
            
            --tcl-primary: #0071e3;
            --tcl-bg: rgba(0, 113, 227, 0.08);
            --tcl-border: #0071e3;
            --c-primary: #059669;
            --c-bg: rgba(5, 150, 105, 0.08);
            --c-border: #059669;
            --code-bg: #f5f5f7;
            --code-text: #1d1d1f;
            --shadow: rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 20px;
            line-height: 1.6;
            margin: 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-secondary);
            border-radius: 20px;
            box-shadow: var(--shadow-strong);
            overflow: hidden;
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
        }

        /* Header */
        .header {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .header-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .icon-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: 20px;
        }

        .icon-btn:hover {
            background: var(--bg-glass-hover);
            box-shadow: 0 0 20px var(--glow-color);
            transform: scale(1.05);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Memory Summary Panel */
        .memory-summary {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 30px;
            margin: 20px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-soft);
        }

        .memory-summary h2 {
            color: var(--text-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .memory-card {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .memory-card:hover {
            box-shadow: 0 0 20px var(--glow-color);
            transform: translateY(-2px);
        }

        .memory-card h3 {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .memory-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Section Headers */
        .section {
            padding: 30px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 15px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--tcl-primary);
        }

        .section-header.c-section {
            border-left: 4px solid var(--c-primary);
        }

        .section-header h2 {
            font-size: 2rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .section-icon {
            font-size: 2.5rem;
        }

        /* TCL vs AWK Comparison */
        .tcl-awk-comparison {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-soft);
        }

        .tcl-awk-comparison h3 {
            color: var(--text-primary);
            margin-bottom: 15px;
            text-align: center;
            font-weight: 600;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .comparison-box {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .comparison-box:hover {
            box-shadow: 0 0 20px var(--glow-color);
        }

        .comparison-box h4 {
            color: var(--accent-primary);
            margin-bottom: 10px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .comparison-box ul {
            list-style: none;
            padding-left: 0;
        }

        .comparison-box li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .comparison-box li:before {
            content: "‚Üí ";
            color: var(--accent-primary);
            font-weight: bold;
        }

        /* Program Card */
        .program-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-soft);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 30px var(--glow-color);
        }

        .program-card.tcl-card {
            border-top: 4px solid var(--tcl-primary);
        }

        .program-card.c-card {
            border-top: 4px solid var(--c-primary);
        }

        .program-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .program-card.tcl-card .program-header {
            background: var(--bg-glass);
            border-left: 4px solid var(--tcl-primary);
        }

        .program-card.c-card .program-header {
            background: var(--bg-glass);
            border-left: 4px solid var(--c-primary);
        }

        .program-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .program-title h3 {
            font-size: 1.5rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .program-label {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }

        .tcl-label {
            background: var(--tcl-primary);
        }

        .awk-label {
            background: #7c3aed;
        }

        .c-label {
            background: var(--c-primary);
        }

        .expand-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* Concept Map */
        .concept-map {
            padding: 20px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
        }

        .concept-map h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 1rem;
            font-weight: 600;
        }

        .concept-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .concept-tag {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .concept-tag:hover {
            box-shadow: 0 0 15px var(--glow-color);
            color: var(--text-primary);
        }

        /* Program Content */
        .program-content {
            display: none;
            padding: 25px;
        }

        .program-content.show {
            display: block;
        }

        .explanation {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-soft);
        }

        .explanation h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .explanation p {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        /* Code Container */
        .code-container {
            position: relative;
            margin: 20px 0;
        }

        .code-header {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            color: var(--text-primary);
            padding: 10px 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border-color);
            border-bottom: none;
        }

        .code-label-group {
            display: flex;
            gap: 10px;
        }

        .code-type {
            background: var(--bg-secondary);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid var(--border-color);
        }

        .code-box {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 20px;
            border-radius: 0 0 10px 10px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 400px;
            position: relative;
            border: 1px solid var(--border-color);
            border-top: none;
        }

        .code-box pre {
            margin: 0;
        }

        /* Syntax Highlighting */
        .keyword {
            color: #f472b6;
            font-weight: bold;
        }

        .function {
            color: #60a5fa;
        }

        .string {
            color: #86efac;
        }

        .comment {
            color: #94a3b8;
            font-style: italic;
        }

        .number {
            color: #fbbf24;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 2px dotted var(--accent-primary);
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: var(--text-primary);
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            box-shadow: var(--shadow-strong);
            border: 1px solid var(--border-color);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Quiz Section */
        .quiz-section {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-soft);
        }

        .quiz-section h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .quiz-question {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 1rem;
        }

        .quiz-hint {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 8px;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .quiz-hint.show {
            display: block;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            margin: 5px;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-primary);
        }

        .btn:hover {
            box-shadow: 0 0 20px var(--glow-color);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .btn-primary:hover {
            background: var(--accent-primary);
            box-shadow: 0 0 25px var(--glow-color);
        }

        .btn-secondary {
            background: var(--bg-glass);
            color: var(--text-primary);
        }

        .btn-success {
            background: var(--accent-success);
            color: white;
            border-color: var(--accent-success);
        }

        /* Flashcard Mode */
        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px;
            padding: 20px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-soft);
        }

        .hidden-content {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .memory-grid {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 15px;
            }

            .program-title h3 {
                font-size: 1.2rem;
            }
        }

        /* Animation */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .program-content.show {
            animation: slideIn 0.4s ease;
        }

        /* TCL-AWK Connector */
        .tcl-awk-connector {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px dashed var(--accent-secondary);
            text-align: center;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Right Side Tools Panel */
        .tools-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--bg-glass);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-left: 1px solid var(--border-color);
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 10000;
            overflow-y: auto;
            padding: 30px;
        }

        .tools-panel.open {
            right: 0;
        }

        .tools-panel h3 {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .tools-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .tools-section:last-child {
            border-bottom: none;
        }

        .tools-section h4 {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 15px;
        }

        .toggle-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .toggle-option:hover {
            box-shadow: 0 0 15px var(--glow-color);
        }

        .toggle-option label {
            color: var(--text-primary);
            font-size: 0.95rem;
            cursor: pointer;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--bg-secondary);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: var(--text-muted);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        input[type="checkbox"]:checked + .toggle-switch {
            background: var(--accent-primary);
        }

        input[type="checkbox"]:checked + .toggle-switch::after {
            left: 26px;
            background: white;
        }

        input[type="checkbox"] {
            display: none;
        }

        .dropdown-select {
            width: 100%;
            padding: 10px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dropdown-select:hover, .dropdown-select:focus {
            box-shadow: 0 0 15px var(--glow-color);
            outline: none;
        }

        .panel-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .panel-close-btn:hover {
            background: var(--bg-glass-hover);
            box-shadow: 0 0 15px var(--glow-color);
            transform: rotate(90deg);
        }

        /* Overlay when panel is open */
        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 9999;
        }

        .panel-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Keyboard shortcut hint */
        .shortcut-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Panel Overlay -->
    <div class="panel-overlay" id="panelOverlay" onclick="toggleToolsPanel()"></div>

    <!-- Right Side Tools Panel -->
    <div class="tools-panel" id="toolsPanel">
        <div class="panel-close-btn" onclick="toggleToolsPanel()">‚úï</div>
        <h3>‚öôÔ∏è Study Tools</h3>

        <!-- Code Display Options -->
        <div class="tools-section">
            <h4>Code Display</h4>
            <div class="toggle-option">
                <label for="showCode">Show Code</label>
                <input type="checkbox" id="showCode" checked onchange="applyDisplayOptions()">
                <label for="showCode" class="toggle-switch"></label>
            </div>
            <div class="toggle-option">
                <label for="showComments">Show Comments</label>
                <input type="checkbox" id="showComments" checked onchange="applyDisplayOptions()">
                <label for="showComments" class="toggle-switch"></label>
            </div>
            <div class="toggle-option">
                <label for="showExplanations">Show Explanations</label>
                <input type="checkbox" id="showExplanations" checked onchange="applyDisplayOptions()">
                <label for="showExplanations" class="toggle-switch"></label>
            </div>
            <div class="toggle-option">
                <label for="showQuestions">Show Quiz Questions</label>
                <input type="checkbox" id="showQuestions" checked onchange="applyDisplayOptions()">
                <label for="showQuestions" class="toggle-switch"></label>
            </div>
        </div>

        <!-- Viva Questions Options -->
        <div class="tools-section">
            <h4>Viva Questions</h4>
            <label style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px; display: block;">Questions per program:</label>
            <select class="dropdown-select" id="vivaCount" onchange="applyVivaOptions()">
                <option value="1">1 Question</option>
                <option value="5" selected>5 Questions</option>
                <option value="10">10 Questions</option>
                <option value="20">20 Questions</option>
                <option value="50">All Questions</option>
            </select>
            <div class="toggle-option" style="margin-top: 15px;">
                <label for="showVivaAnswers">Show Answers</label>
                <input type="checkbox" id="showVivaAnswers" onchange="applyVivaOptions()">
                <label for="showVivaAnswers" class="toggle-switch"></label>
            </div>
        </div>

        <!-- Theme Toggle -->
        <div class="tools-section">
            <h4>Appearance</h4>
            <div class="toggle-option">
                <label for="themeToggle">Dark Mode</label>
                <input type="checkbox" id="themeToggle" checked onchange="toggleTheme()">
                <label for="themeToggle" class="toggle-switch"></label>
            </div>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="tools-section">
            <h4>Keyboard Shortcuts</h4>
            <div style="color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8;">
                <div><kbd style="background: var(--bg-secondary); padding: 2px 8px; border-radius: 4px; border: 1px solid var(--border-color);">Ctrl/Cmd + K</kbd> Open Tools</div>
                <div><kbd style="background: var(--bg-secondary); padding: 2px 8px; border-radius: 4px; border: 1px solid var(--border-color);">Esc</kbd> Close Tools</div>
                <div><kbd style="background: var(--bg-secondary); padding: 2px 8px; border-radius: 4px; border: 1px solid var(--border-color);">Ctrl/Cmd + T</kbd> Toggle Theme</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üéì Network Programming Study Companion</h1>
            <p>Master 10 Programs: 5 TCL/AWK + 5 C Programs with Memory Aids &amp; Interactive Learning</p>
            <div class="header-controls">
                <div class="icon-btn" onclick="toggleTheme()" title="Toggle Theme (Ctrl/Cmd + T)">
                    üåô
                </div>
                <div class="icon-btn" onclick="toggleToolsPanel()" title="Open Tools (Ctrl/Cmd + K)">
                    ‚öôÔ∏è
                </div>
            </div>
        </div>

        <!-- Memory Summary Panel -->
        <div class="memory-summary">
            <h2>‚ö° Quick Recall Summary</h2>
            <div class="memory-grid">
                <div class="memory-card">
                    <h3>üîµ TCL Programs (NS2 Simulations)</h3>
                    <p><strong>Pattern:</strong> Create simulator ‚Üí Define topology ‚Üí Attach agents ‚Üí Schedule events ‚Üí Run simulation</p>
                </div>
                <div class="memory-card">
                    <h3>üü£ AWK Scripts (Analysis)</h3>
                    <p><strong>Pattern:</strong> BEGIN (init vars) ‚Üí Process each line ‚Üí END (print results)</p>
                </div>
                <div class="memory-card">
                    <h3>üü¢ C Programs (Algorithms)</h3>
                    <p><strong>Pattern:</strong> Input ‚Üí Process (loops/conditions) ‚Üí Output ‚Üí Includes string/bit manipulation or graph traversal</p>
                </div>
                <div class="memory-card">
                    <h3>üí° Key Difference</h3>
                    <p><strong>TCL:</strong> Simulation (network behavior) | <strong>AWK:</strong> Analysis (trace files) | <strong>C:</strong> Implementation (protocols/algorithms)</p>
                </div>
            </div>
        </div>

        <!-- TCL + AWK Section -->
        <div class="section">
            <div class="section-header">
                <span class="section-icon">üîµ</span>
                <h2>TCL + AWK Programs (Network Simulations)</h2>
            </div>

            <!-- TCL vs AWK Comparison -->
            <div class="tcl-awk-comparison">
                <h3>üìä TCL vs AWK: Quick Mental Model</h3>
                <div class="comparison-grid">
                    <div class="comparison-box">
                        <h4>TCL (Tool Command Language)</h4>
                        <ul>
                            <li>Creates network simulations in NS2</li>
                            <li>Defines: nodes, links, traffic</li>
                            <li>Uses: set, $ns, attach-agent</li>
                            <li>Outputs: .tr (trace), .nam (animation)</li>
                            <li>Think: "The Builder" - constructs scenarios</li>
                        </ul>
                    </div>
                    <div class="comparison-box">
                        <h4>AWK (Pattern Scanning)</h4>
                        <ul>
                            <li>Analyzes trace files from TCL</li>
                            <li>Extracts: packets sent/received/dropped</li>
                            <li>Uses: BEGIN, END, if conditions</li>
                            <li>Outputs: Statistics (throughput, PDR)</li>
                            <li>Think: "The Analyzer" - processes results</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Program 1: P2P -->
            <div class="program-card tcl-card">
                <div class="program-header" onclick="toggleProgram('prog1')">
                    <div class="program-title">
                        <h3>1Ô∏è‚É£ Point-to-Point Network</h3>
                        <span class="program-label tcl-label">TCL</span>
                        <span class="program-label awk-label">AWK</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Duplex Links</span>
                        <span class="concept-tag">Queue Limits</span>
                        <span class="concept-tag">UDP/CBR Traffic</span>
                        <span class="concept-tag">Packet Drops</span>
                        <span class="concept-tag">Bandwidth Analysis</span>
                    </div>
                </div>
                <div class="program-content" id="prog1">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "4-Nodes-Drop")</h4>
                        <p><strong>Simple Idea:</strong> Four nodes connected in a line. Two sources (n0, n1) send data through a bottleneck (n2) to destination (n3). Small queue + high traffic = packet drops. AWK counts dropped packets.</p>
                        <p><strong>Pattern:</strong> Create 4 nodes ‚Üí Link them with varying bandwidth ‚Üí Set small queue limits ‚Üí Send CBR traffic ‚Üí Bottleneck causes drops</p>
                    </div>

                    <div class="tcl-awk-connector">
                        TCL creates simulation ‚Üí generates p1.tr trace file ‚Üí AWK analyzes p1.tr to count drops
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">TCL SCRIPT</span>
                                <span class="code-type">p1.tcl</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code1')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code1">
                            <pre><span class="comment"># Create simulator instance</span>
<span class="keyword">set</span> ns [<span class="keyword">new</span> <span class="function">Simulator</span>]

<span class="comment"># Open trace and NAM files</span>
<span class="keyword">set</span> tf [<span class="function">open</span> p1.tr w]
$ns <span class="function">trace-all</span> $tf

<span class="comment"># Create four nodes</span>
<span class="keyword">set</span> n0 [$ns <span class="function">node</span>]
<span class="keyword">set</span> n1 [$ns <span class="function">node</span>]
<span class="keyword">set</span> n2 [$ns <span class="function">node</span>]
<span class="keyword">set</span> n3 [$ns <span class="function">node</span>]

<span class="comment"># Duplex links with different bandwidths</span>
$ns <span class="tooltip">duplex-link<span class="tooltiptext">Creates bidirectional link between two nodes with specified bandwidth, delay, and queue type</span></span> $n0 $n2 <span class="number">20Mb</span> 10Ms DropTail
$ns duplex-link $n1 $n2 <span class="number">10Mb</span> 10Ms DropTail
$ns duplex-link $n2 $n3 <span class="number">0.7Mb</span> 10Ms DropTail  <span class="comment"># Bottleneck!</span>

<span class="comment"># Set queue limits (small queues = more drops)</span>
$ns <span class="tooltip">set queue-limit<span class="tooltiptext">Maximum number of packets that can be queued at a link</span></span> $n0 $n2 <span class="number">10</span>
$ns set queue-limit $n2 $n3 <span class="number">5</span>

<span class="comment"># Attach UDP agents and CBR traffic</span>
<span class="keyword">set</span> udp0 [<span class="keyword">new</span> <span class="function">Agent/UDP</span>]
<span class="keyword">set</span> cbr0 [<span class="keyword">new</span> <span class="function">Application/Traffic/CBR</span>]
$ns <span class="function">attach-agent</span> $n0 $udp0
$cbr0 <span class="function">attach-agent</span> $udp0

<span class="comment"># Configure CBR parameters</span>
$cbr0 <span class="keyword">set</span> packetsize_ <span class="number">512</span>
$cbr0 <span class="keyword">set</span> interval_ <span class="number">0.001</span>  <span class="comment"># Very frequent!</span>

<span class="comment"># Schedule traffic events</span>
$ns <span class="function">at</span> <span class="number">0.0</span> <span class="string">"$cbr0 start"</span>
$ns at <span class="number">10.0</span> <span class="string">"$cbr0 stop"</span>
$ns at <span class="number">13.0</span> <span class="string">"finish"</span>

<span class="comment"># Run simulation</span>
$ns <span class="function">run</span></pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">AWK SCRIPT</span>
                                <span class="code-type">p1.awk</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code1awk')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code1awk">
                            <pre><span class="keyword">BEGIN</span> {
    count=<span class="number">0</span>;
}

{
    <span class="comment"># Check if first column is "d" (dropped packet)</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"d"</span>)
        count++;
}

<span class="keyword">END</span> {
    <span class="function">printf</span>(<span class="string">"Number of packets dropped: %d\n"</span>, count);
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What causes packet drops in this program?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint1')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint1">
                            <strong>Answer:</strong> The bottleneck link (n2‚Üín3 at 0.7Mb) combined with small queue limits (5 packets) cannot handle the high-rate CBR traffic from both sources, causing queue overflow and packet drops.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 2: UDP/TCP -->
            <div class="program-card tcl-card">
                <div class="program-header" onclick="toggleProgram('prog2')">
                    <div class="program-title">
                        <h3>2Ô∏è‚É£ TCP vs UDP Transmission</h3>
                        <span class="program-label tcl-label">TCL</span>
                        <span class="program-label awk-label">AWK</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">TCP vs UDP</span>
                        <span class="concept-tag">FTP Application</span>
                        <span class="concept-tag">Reliable vs Unreliable</span>
                        <span class="concept-tag">Packet Counting</span>
                        <span class="concept-tag">Protocol Comparison</span>
                    </div>
                </div>
                <div class="program-content" id="prog2">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "TCP-Reliable UDP-Fast")</h4>
                        <p><strong>Simple Idea:</strong> Same topology as P2P, but now compare TCP (reliable, uses FTP) vs UDP (unreliable, uses CBR). TCP sends fewer packets due to congestion control. UDP sends more but loses more.</p>
                        <p><strong>Pattern:</strong> Same 4-node setup ‚Üí TCP on n0-n3 (FTP) ‚Üí UDP on n1-n3 (CBR) ‚Üí AWK counts TCP packets vs UDP packets sent</p>
                    </div>

                    <div class="tcl-awk-connector">
                        TCL runs two flows (TCP + UDP) ‚Üí p2.tr trace ‚Üí AWK separates and counts each protocol
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">TCL SCRIPT</span>
                                <span class="code-type">p2.tcl</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code2')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code2">
                            <pre><span class="comment"># Same topology as P2P</span>
<span class="keyword">set</span> ns [<span class="keyword">new</span> <span class="function">Simulator</span>]
<span class="comment"># ... (4 nodes + links same as p1.tcl)</span>

<span class="comment"># TCP setup</span>
<span class="keyword">set</span> <span class="tooltip">tcp<span class="tooltiptext">Transmission Control Protocol - reliable, connection-oriented with congestion control</span></span> [<span class="keyword">new</span> <span class="function">Agent/TCP</span>]
<span class="keyword">set</span> <span class="tooltip">ftp<span class="tooltiptext">File Transfer Protocol application - generates bulk data transfer over TCP</span></span> [<span class="keyword">new</span> <span class="function">Application/FTP</span>]
$ns <span class="function">attach-agent</span> $n0 $tcp
$ftp <span class="function">attach-agent</span> $tcp

<span class="comment"># UDP setup</span>
<span class="keyword">set</span> <span class="tooltip">udp<span class="tooltiptext">User Datagram Protocol - unreliable, connectionless, no flow control</span></span> [<span class="keyword">new</span> <span class="function">Agent/UDP</span>]
<span class="keyword">set</span> cbr [<span class="keyword">new</span> <span class="function">Application/Traffic/CBR</span>]
$ns <span class="function">attach-agent</span> $n1 $udp
$cbr <span class="function">attach-agent</span> $udp

<span class="comment"># Schedule both flows</span>
$ns <span class="function">at</span> <span class="number">0.0</span> <span class="string">"$ftp start"</span>   <span class="comment"># TCP starts</span>
$ns at <span class="number">2.0</span> <span class="string">"$cbr start"</span>   <span class="comment"># UDP starts later</span>
$ns at <span class="number">13.0</span> <span class="string">"finish"</span></pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">AWK SCRIPT</span>
                                <span class="code-type">p2.awk</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code2awk')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code2awk">
                            <pre><span class="keyword">BEGIN</span> {
    tcp=<span class="number">0</span>;
    cbr=<span class="number">0</span>;
}

{
    <span class="comment"># Count TCP packets sent (column 1 = "-", column 5 = "tcp")</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"-"</span> && $<span class="number">5</span>==<span class="string">"tcp"</span>)
        tcp++;
    
    <span class="comment"># Count UDP packets sent (column 5 = "cbr")</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"-"</span> && $<span class="number">5</span>==<span class="string">"cbr"</span>)
        cbr++;
}

<span class="keyword">END</span> {
    <span class="function">printf</span>(<span class="string">"TCP packets sent: %d\n"</span>, tcp);
    <span class="function">printf</span>(<span class="string">"UDP packets sent: %d\n"</span>, cbr);
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: Why does TCP typically send fewer packets than UDP in congested networks?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint2')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint2">
                            <strong>Answer:</strong> TCP has congestion control mechanisms that slow down transmission when packet loss is detected. UDP has no such control - it keeps sending at the configured rate regardless of network conditions.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 3: LAN -->
            <div class="program-card tcl-card">
                <div class="program-header" onclick="toggleProgram('prog3')">
                    <div class="program-title">
                        <h3>3Ô∏è‚É£ Ethernet LAN Throughput</h3>
                        <span class="program-label tcl-label">TCL</span>
                        <span class="program-label awk-label">AWK</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">make-lan Command</span>
                        <span class="concept-tag">Ethernet 802.3</span>
                        <span class="concept-tag">Throughput Calculation</span>
                        <span class="concept-tag">Error Model</span>
                        <span class="concept-tag">Two LANs</span>
                    </div>
                </div>
                <div class="program-content" id="prog3">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Two-LANs-Bridge")</h4>
                        <p><strong>Simple Idea:</strong> Create two separate LANs (5 nodes each) connected via a bridge link. Simulate TCP and UDP traffic between LANs. Add error model to simulate packet loss. AWK calculates throughput by dividing total bytes by time.</p>
                        <p><strong>Pattern:</strong> make-lan (creates Ethernet) ‚Üí Connect two LANs ‚Üí Apply error model ‚Üí Measure throughput = (packets √ó size) / time</p>
                    </div>

                    <div class="tcl-awk-connector">
                        TCL simulates LAN topology + error model ‚Üí AWK calculates throughput from received packets
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">TCL SCRIPT</span>
                                <span class="code-type">p3.tcl</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code3')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code3">
                            <pre><span class="keyword">set</span> ns [<span class="keyword">new</span> <span class="function">Simulator</span>]

<span class="comment"># Create 10 nodes</span>
<span class="keyword">for</span> {<span class="keyword">set</span> i <span class="number">0</span>} {$i&lt;<span class="number">10</span>} {<span class="keyword">incr</span> i} {
    <span class="keyword">set</span> n($i) [$ns <span class="function">node</span>]
}

<span class="comment"># Create two Ethernet LANs using make-lan</span>
$ns <span class="tooltip">make-lan<span class="tooltiptext">Creates a LAN segment connecting multiple nodes with specified bandwidth and MAC protocol</span></span> <span class="string">"$n(0) $n(1) $n(2) $n(3) $n(4)"</span> <span class="number">10Mb</span> 10ms LL Queue/DropTail Mac/802_3
$ns make-lan <span class="string">"$n(5) $n(6) $n(7) $n(8) $n(9)"</span> <span class="number">10Mb</span> 10ms LL Queue/DropTail Mac/802_3

<span class="comment"># Connect LANs via bridge link</span>
$ns <span class="function">duplex-link</span> $n(4) $n(5) <span class="number">1Mb</span> 3ms DropTail  <span class="comment"># Bottleneck between LANs</span>

<span class="comment"># Error model to simulate packet loss</span>
<span class="keyword">set</span> err [<span class="keyword">new</span> <span class="function">ErrorModel</span>]
$ns <span class="tooltip">lossmodel<span class="tooltiptext">Introduces random packet loss to simulate real-world errors</span></span> $err $n(4) $n(5)
$err <span class="keyword">set</span> rate_ <span class="number">0.01</span>  <span class="comment"># 1% packet loss</span>

<span class="comment"># Setup TCP and UDP flows between LANs</span>
<span class="keyword">set</span> tcp [<span class="keyword">new</span> Agent/TCP]
<span class="keyword">set</span> ftp [<span class="keyword">new</span> Application/FTP]
$ns <span class="function">attach-agent</span> $n(0) $tcp
$ns attach-agent $n(9) [<span class="keyword">new</span> Agent/TCPSink]</pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">AWK SCRIPT</span>
                                <span class="code-type">p3.awk</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code3awk')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code3awk">
                            <pre><span class="keyword">BEGIN</span> {
    rpacketsize_tcp=<span class="number">0</span>;
    rtimeinterval_tcp=<span class="number">0</span>;
}

{
    <span class="comment"># Track TCP received packets</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"r"</span> && $<span class="number">5</span>==<span class="string">"tcp"</span> && $<span class="number">4</span>==<span class="string">"9"</span>) {
        rpacketsize_tcp += $<span class="number">6</span>;        <span class="comment"># Accumulate packet sizes</span>
        rtimeinterval_tcp = $<span class="number">2</span>;      <span class="comment"># Update time</span>
    }
}

<span class="keyword">END</span> {
    <span class="comment"># Throughput = (total bytes * 8) / time / 1,000,000 for Mbps</span>
    <span class="function">printf</span>(<span class="string">"Throughput for TCP = %f Mbps\n"</span>,
        rpacketsize_tcp / rtimeinterval_tcp * <span class="number">8</span> * <span class="number">512</span> / <span class="number">1000000</span>);
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What does the "make-lan" command create in NS2?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint3')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint3">
                            <strong>Answer:</strong> make-lan creates an Ethernet LAN segment that connects multiple nodes with a shared medium using the 802.3 MAC protocol. All nodes in the LAN can communicate directly with specified bandwidth and delay.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 4: Multi-Traffic -->
            <div class="program-card tcl-card">
                <div class="program-header" onclick="toggleProgram('prog4')">
                    <div class="program-title">
                        <h3>4Ô∏è‚É£ Congestion Window Analysis</h3>
                        <span class="program-label tcl-label">TCL</span>
                        <span class="program-label awk-label">AWK</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Congestion Window (cwnd)</span>
                        <span class="concept-tag">Multiple TCP Flows</span>
                        <span class="concept-tag">Trace cwnd_</span>
                        <span class="concept-tag">xgraph Visualization</span>
                        <span class="concept-tag">Competition</span>
                    </div>
                </div>
                <div class="program-content" id="prog4">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Two-TCPs-Race")</h4>
                        <p><strong>Simple Idea:</strong> Two TCP flows compete on same LAN. Each TCP has different max cwnd (10 vs 5). Trace congestion window changes over time using "trace cwnd_". AWK extracts cwnd values for plotting with xgraph.</p>
                        <p><strong>Pattern:</strong> Create LAN ‚Üí Two TCP flows ‚Üí trace cwnd_ ‚Üí Start/stop at different times ‚Üí AWK extracts cwnd vs time ‚Üí Plot with xgraph</p>
                    </div>

                    <div class="tcl-awk-connector">
                        TCL traces cwnd to separate files (file0.tr, file1.tr) ‚Üí AWK formats for graphing
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">TCL SCRIPT</span>
                                <span class="code-type">p4.tcl</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code4')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code4">
                            <pre><span class="keyword">set</span> ns [<span class="keyword">new</span> <span class="function">Simulator</span>]

<span class="comment"># Create 4-node LAN</span>
$ns <span class="function">make-lan</span> <span class="string">"$n(0) $n(1) $n(2) $n(3)"</span> <span class="number">10Mb</span> 10ms LL Queue/DropTail Mac/802_3

<span class="comment"># First TCP flow</span>
<span class="keyword">set</span> tcp0 [<span class="keyword">new</span> Agent/TCP]
<span class="keyword">set</span> ftp0 [<span class="keyword">new</span> Application/FTP]
$ns <span class="function">attach-agent</span> $n(0) $tcp0

<span class="comment"># Congestion window tracing for TCP0</span>
<span class="keyword">set</span> file0 [<span class="keyword">open</span> file0.tr w]
$tcp0 <span class="tooltip">attach<span class="tooltiptext">Attaches a trace file to an agent to record specific variables</span></span> $file0
$tcp0 <span class="tooltip">trace cwnd_<span class="tooltiptext">Traces the congestion window size over time</span></span>
$tcp0 <span class="keyword">set</span> maxcwnd_ <span class="number">10</span>  <span class="comment"># Max window size</span>

<span class="comment"># Second TCP flow</span>
<span class="keyword">set</span> tcp1 [<span class="keyword">new</span> Agent/TCP]
<span class="keyword">set</span> ftp1 [<span class="keyword">new</span> Application/FTP]
$tcp1 <span class="keyword">set</span> maxcwnd_ <span class="number">5</span>   <span class="comment"># Smaller window</span>

<span class="comment"># Schedule with overlapping times</span>
$ns <span class="function">at</span> <span class="number">0.1</span> <span class="string">"$ftp0 start"</span>
$ns at <span class="number">1.5</span> <span class="string">"$ftp0 stop"</span>
$ns at <span class="number">0.2</span> <span class="string">"$ftp1 start"</span>   <span class="comment"># Starts slightly after</span>
$ns at <span class="number">2.0</span> <span class="string">"$ftp1 stop"</span></pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">AWK SCRIPT</span>
                                <span class="code-type">p4.awk</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code4awk')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code4awk">
                            <pre><span class="keyword">BEGIN</span> {
}

{
    <span class="comment"># Extract cwnd values (column 6 = "cwnd_", column 7 = value)</span>
    <span class="keyword">if</span> ($<span class="number">6</span>==<span class="string">"cwnd_"</span>)
        <span class="function">printf</span>(<span class="string">"%f\t%f\n"</span>, $<span class="number">1</span>, $<span class="number">7</span>);  <span class="comment"># time, cwnd value</span>
}

<span class="keyword">END</span> {
}

<span class="comment"># Usage: awk -f p4.awk file0.tr > file0</span>
<span class="comment"># Then: xgraph -x "time" -y "congestion_window" file0 file1</span></pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What does the congestion window (cwnd) represent in TCP?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint4')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint4">
                            <strong>Answer:</strong> The congestion window is the number of unacknowledged packets TCP can have in flight at any time. It dynamically adjusts based on network congestion - growing when packets are successfully delivered and shrinking when packet loss is detected.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 5: Routing -->
            <div class="program-card tcl-card">
                <div class="program-header" onclick="toggleProgram('prog5')">
                    <div class="program-title">
                        <h3>5Ô∏è‚É£ Link State Routing</h3>
                        <span class="program-label tcl-label">TCL</span>
                        <span class="program-label awk-label">AWK</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">rtproto LS</span>
                        <span class="concept-tag">Dijkstra Algorithm</span>
                        <span class="concept-tag">Link Failure</span>
                        <span class="concept-tag">Routing Overhead</span>
                        <span class="concept-tag">PDR Calculation</span>
                    </div>
                </div>
                <div class="program-content" id="prog5">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Links-Die-Reroute")</h4>
                        <p><strong>Simple Idea:</strong> Create 12-node network with Link State (LS) routing protocol. Simulate link failures (rtmodel-at down/up). Routers recalculate shortest paths using Dijkstra. AWK measures PDR (Packet Delivery Ratio) and routing overhead.</p>
                        <p><strong>Pattern:</strong> Enable rtproto LS ‚Üí Create complex topology ‚Üí Simulate link failures ‚Üí Routers flood LSAs and recalculate ‚Üí Measure adaptation</p>
                    </div>

                    <div class="tcl-awk-connector">
                        TCL simulates dynamic routing with link failures ‚Üí AWK analyzes routing packets and data delivery
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">TCL SCRIPT</span>
                                <span class="code-type">p5.tcl</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code5')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code5">
                            <pre><span class="keyword">set</span> ns [<span class="keyword">new</span> <span class="function">Simulator</span>]

<span class="comment"># Enable Link State Routing Protocol</span>
$ns <span class="tooltip">rtproto LS<span class="tooltiptext">Activates Link State routing - each router maintains complete topology map and uses Dijkstra's algorithm</span></span>

<span class="comment"># Create 12 nodes</span>
<span class="keyword">for</span> {<span class="keyword">set</span> i <span class="number">0</span>} {$i&lt;<span class="number">12</span>} {<span class="keyword">incr</span> i} {
    <span class="keyword">set</span> n($i) [$ns <span class="function">node</span>]
}

<span class="comment"># Create ring + cross-links topology</span>
$ns <span class="function">duplex-link</span> $n(0) $n(1) 1Mb 10ms DropTail
$ns duplex-link $n(1) $n(2) 1Mb 10ms DropTail
<span class="comment"># ... (more links forming a mesh)</span>
$ns duplex-link $n(8) $n(0) 1Mb 10ms DropTail  <span class="comment"># Closes ring</span>

<span class="comment"># Introduce link failures and recoveries</span>
$ns <span class="tooltip">rtmodel-at<span class="tooltiptext">Simulates link state changes at specific times</span></span> <span class="number">10.0</span> <span class="keyword">down</span> $n(11) $n(5)  <span class="comment"># Link fails at t=10</span>
$ns rtmodel-at <span class="number">30.0</span> <span class="keyword">up</span> $n(11) $n(5)    <span class="comment"># Link recovers at t=30</span>
$ns rtmodel-at <span class="number">15.0</span> <span class="keyword">down</span> $n(7) $n(6)
$ns rtmodel-at <span class="number">20.0</span> <span class="keyword">up</span> $n(7) $n(6)

<span class="comment"># Setup traffic</span>
<span class="keyword">set</span> udp0 [<span class="keyword">new</span> Agent/UDP]
<span class="keyword">set</span> cbr0 [<span class="keyword">new</span> Application/Traffic/CBR]
$ns <span class="function">attach-agent</span> $n(0) $udp0
$cbr0 attach-agent $udp0

$ns <span class="function">at</span> <span class="number">5.0</span> <span class="string">"$cbr0 start"</span>
$ns at <span class="number">45.0</span> <span class="string">"$cbr0 stop"</span></pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">AWK SCRIPT</span>
                                <span class="code-type">p5.awk</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code5awk')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code5awk">
                            <pre><span class="keyword">BEGIN</span> {
    pksend = <span class="number">0</span>;
    pkreceive = <span class="number">0</span>;
    pkdrop = <span class="number">0</span>;
    pkrouting = <span class="number">0</span>;
}

{
    <span class="comment"># Count sent packets (from nodes 0 or 1)</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"-"</span> && ($<span class="number">3</span>==<span class="string">"0"</span> || $<span class="number">3</span>==<span class="string">"1"</span>) && $<span class="number">5</span>==<span class="string">"cbr"</span>)
        pksend += <span class="number">1</span>;
    
    <span class="comment"># Count received packets at destination</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"r"</span> && $<span class="number">4</span>==<span class="string">"5"</span> && $<span class="number">5</span>==<span class="string">"cbr"</span>)
        pkreceive += <span class="number">1</span>;
    
    <span class="comment"># Count dropped packets</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"d"</span>)
        pkdrop += <span class="number">1</span>;
    
    <span class="comment"># Count routing protocol packets (LS overhead)</span>
    <span class="keyword">if</span> ($<span class="number">1</span>==<span class="string">"r"</span> && ($<span class="number">5</span>==<span class="string">"rtProtoDV"</span> || $<span class="number">5</span>==<span class="string">"rtProtoLS"</span>))
        pkrouting += <span class="number">1</span>;
}

<span class="keyword">END</span> {
    <span class="function">print</span> <span class="string">"Packets sent = "</span> pksend;
    <span class="function">print</span> <span class="string">"Packets received = "</span> pkreceive;
    <span class="function">print</span> <span class="string">"Packets dropped = "</span> pkdrop;
    <span class="function">print</span> <span class="string">"Routing packets = "</span> pkrouting;
    <span class="function">print</span> <span class="string">"PDR (received/sent) = "</span> pkreceive/pksend;
    <span class="function">print</span> <span class="string">"Normalized Overhead = "</span> pkrouting/pkreceive;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What happens when a link fails in Link State routing?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint5')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint5">
                            <strong>Answer:</strong> When a link fails, the adjacent routers detect it and flood Link State Advertisements (LSAs) to all other routers. Each router updates its topology database and reruns Dijkstra's algorithm to compute new shortest paths that avoid the failed link.
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- C Programs Section -->
        <div class="section">
            <div class="section-header c-section">
                <span class="section-icon">üü¢</span>
                <h2>C Programs (Protocol Implementations &amp; Algorithms)</h2>
            </div>

            <!-- Program 6: HDLC -->
            <div class="program-card c-card">
                <div class="program-header" onclick="toggleProgram('prog6')">
                    <div class="program-title">
                        <h3>6Ô∏è‚É£ HDLC Frame Processing</h3>
                        <span class="program-label c-label">C</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Bit Stuffing</span>
                        <span class="concept-tag">Character Stuffing</span>
                        <span class="concept-tag">Flag: 01111110</span>
                        <span class="concept-tag">DLE/STX/ETX</span>
                        <span class="concept-tag">Framing</span>
                    </div>
                </div>
                <div class="program-content" id="prog6">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Five-Ones-Stuff-Zero")</h4>
                        <p><strong>Simple Idea:</strong> Two programs - (1) Bit Stuffing: After five consecutive 1s, insert a 0. Frame starts/ends with 01111110. (2) Character Stuffing: If DLE appears in data, duplicate it. Frame is DLE-STX...data...DLE-ETX.</p>
                        <p><strong>Pattern:</strong> Bit: Counter tracks 1s ‚Üí if counter==5, insert 0 | Char: Check if char==DLE ‚Üí duplicate DLE</p>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">Bit Stuffing</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code6')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code6">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;string.h&gt;</span>

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">char</span> ch, array[<span class="number">100</span>] = <span class="string">"01111110"</span>;  <span class="comment">// Start with flag</span>
    <span class="keyword">int</span> counter = <span class="number">0</span>;  <span class="comment">// Count consecutive 1s</span>
    <span class="keyword">int</span> i = <span class="number">8</span>;       <span class="comment">// Start after flag (8 bits)</span>
    
    <span class="function">printf</span>(<span class="string">"Enter data stream (0s and 1s):\n"</span>);
    
    <span class="keyword">while</span> ((ch = <span class="tooltip">getchar<span class="tooltiptext">Reads one character at a time from input</span></span>()) != <span class="string">'\n'</span>) {
        <span class="keyword">if</span> (ch != <span class="string">'0'</span> && ch != <span class="string">'1'</span>) <span class="keyword">continue</span>;  <span class="comment">// Skip non-binary</span>
        
        <span class="comment">// Count consecutive 1s</span>
        <span class="keyword">if</span> (ch == <span class="string">'1'</span>) {
            ++counter;
        } <span class="keyword">else</span> {
            counter = <span class="number">0</span>;  <span class="comment">// Reset on 0</span>
        }
        
        array[i++] = ch;  <span class="comment">// Add bit to frame</span>
        
        <span class="comment">// Bit stuffing: after 5 consecutive 1s, stuff a 0</span>
        <span class="keyword">if</span> (counter == <span class="number">5</span>) {
            array[i++] = <span class="string">'0'</span>;  <span class="comment">// STUFF!</span>
            counter = <span class="number">0</span>;
        }
    }
    
    <span class="comment">// Add ending flag</span>
    <span class="function">strcat</span>(array, <span class="string">"01111110"</span>);
    
    <span class="function">printf</span>(<span class="string">"Stuffed stream: %s\n"</span>, array);
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">Character Stuffing</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code6char')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code6char">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">#define</span> <span class="tooltip">DLE<span class="tooltiptext">Data Link Escape - ASCII 16</span></span> <span class="number">16</span>
<span class="keyword">#define</span> <span class="tooltip">STX<span class="tooltiptext">Start of Text - ASCII 2</span></span> <span class="number">2</span>
<span class="keyword">#define</span> <span class="tooltip">ETX<span class="tooltiptext">End of Text - ASCII 3</span></span> <span class="number">3</span>

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">char</span> ch;
    <span class="keyword">char</span> array[<span class="number">100</span>] = {DLE, STX};  <span class="comment">// Start frame</span>
    <span class="keyword">int</span> i = <span class="number">2</span>;
    
    <span class="function">printf</span>(<span class="string">"Enter data (Ctrl+P for DLE):\n"</span>);
    
    <span class="keyword">while</span> ((ch = <span class="function">getchar</span>()) != <span class="string">'\n'</span>) {
        <span class="comment">// If DLE appears in data, stuff another DLE</span>
        <span class="keyword">if</span> (ch == DLE) {
            array[i++] = DLE;  <span class="comment">// STUFF DLE!</span>
            <span class="function">printf</span>(<span class="string">"DLE "</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (ch == STX) {
            <span class="function">printf</span>(<span class="string">"STX "</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (ch == ETX) {
            <span class="function">printf</span>(<span class="string">"ETX "</span>);
        } <span class="keyword">else</span> {
            <span class="function">printf</span>(<span class="string">"%c "</span>, ch);
        }
        
        array[i++] = ch;  <span class="comment">// Add character</span>
    }
    
    <span class="comment">// End frame with DLE ETX</span>
    array[i++] = DLE;
    array[i++] = ETX;
    
    <span class="function">printf</span>(<span class="string">"\n\nStuffed stream:\n"</span>);
    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j) {
        <span class="keyword">if</span> (array[j] == DLE) <span class="function">printf</span>(<span class="string">"DLE "</span>);
        <span class="keyword">else</span> <span class="keyword">if</span> (array[j] == STX) <span class="function">printf</span>(<span class="string">"STX "</span>);
        <span class="keyword">else</span> <span class="keyword">if</span> (array[j] == ETX) <span class="function">printf</span>(<span class="string">"ETX "</span>);
        <span class="keyword">else</span> <span class="function">printf</span>(<span class="string">"%c "</span>, array[j]);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: Why do we need bit stuffing in HDLC?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint6')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint6">
                            <strong>Answer:</strong> Bit stuffing prevents the flag pattern (01111110) from appearing in the data by inserting a 0 after five consecutive 1s. This ensures the receiver can reliably detect frame boundaries.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 7: Dijkstra -->
            <div class="program-card c-card">
                <div class="program-header" onclick="toggleProgram('prog7')">
                    <div class="program-title">
                        <h3>7Ô∏è‚É£ Dijkstra's Shortest Path</h3>
                        <span class="program-label c-label">C</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Greedy Algorithm</span>
                        <span class="concept-tag">Graph Traversal</span>
                        <span class="concept-tag">Adjacency Matrix</span>
                        <span class="concept-tag">Visited Array</span>
                        <span class="concept-tag">Distance Array</span>
                    </div>
                </div>
                <div class="program-content" id="prog7">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Pick-Closest-Update-Neighbors")</h4>
                        <p><strong>Simple Idea:</strong> Find shortest path from source to all vertices. Greedy approach: Always pick unvisited vertex with minimum distance. Update distances of its neighbors. Repeat until all visited.</p>
                        <p><strong>Pattern:</strong> Init distances (infinity) ‚Üí Mark source as 0 ‚Üí Loop: Find min unvisited ‚Üí Update neighbors ‚Üí Mark visited</p>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">dijkstra.c</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code7')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code7">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="keyword">void</span> <span class="function">dijkstra</span>(<span class="keyword">int</span> src, <span class="keyword">int</span> cost[][<span class="number">10</span>], <span class="keyword">int</span> dist[], <span class="keyword">int</span> n) {
    <span class="keyword">int</span> visited[<span class="number">10</span>], min, i, j, u;
    
    <span class="comment">// Initialize: all unvisited, distances from source</span>
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) {
        visited[i] = <span class="number">0</span>;           <span class="comment">// Mark unvisited</span>
        dist[i] = cost[src][i];   <span class="comment">// Direct distance from source</span>
    }
    
    visited[src] = <span class="number">1</span>;  <span class="comment">// Mark source as visited</span>
    dist[src] = <span class="number">0</span>;     <span class="comment">// Distance to self = 0</span>
    
    <span class="comment">// Process each vertex</span>
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) {
        <span class="keyword">if</span> (i == src) <span class="keyword">continue</span>;
        
        min = <span class="number">999</span>;  <span class="comment">// Infinity</span>
        
        <span class="comment">// STEP 1: Find unvisited vertex with minimum distance</span>
        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++) {
            <span class="keyword">if</span> (visited[j] == <span class="number">0</span> && min &gt; dist[j]) {
                min = dist[j];
                u = j;  <span class="comment">// Store the vertex</span>
            }
        }
        
        visited[u] = <span class="number">1</span>;  <span class="comment">// STEP 2: Mark as visited</span>
        
        <span class="comment">// STEP 3: Update distances of neighbors of u</span>
        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++) {
            <span class="keyword">if</span> (visited[j] == <span class="number">0</span>) {
                <span class="comment">// If path through u is shorter, update</span>
                <span class="keyword">if</span> (dist[j] &gt; dist[u] + cost[u][j])
                    dist[j] = dist[u] + cost[u][j];
            }
        }
    }
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> n, cost[<span class="number">10</span>][<span class="number">10</span>], dist[<span class="number">10</span>], i, j, src;
    
    <span class="function">printf</span>(<span class="string">"Enter number of vertices: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &n);
    
    <span class="function">printf</span>(<span class="string">"Enter adjacency matrix (999 for infinity):\n"</span>);
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)
        <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= n; j++)
            <span class="function">scanf</span>(<span class="string">"%d"</span>, &cost[i][j]);
    
    <span class="function">printf</span>(<span class="string">"Enter source vertex: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &src);
    
    <span class="function">dijkstra</span>(src, cost, dist, n);
    
    <span class="function">printf</span>(<span class="string">"\nShortest paths from %d:\n"</span>, src);
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)
        <span class="function">printf</span>(<span class="string">"%d ‚Üí %d = %d\n"</span>, src, i, dist[i]);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What is the time complexity of Dijkstra's algorithm?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint7')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint7">
                            <strong>Answer:</strong> O(V¬≤) where V is the number of vertices. For each vertex, we scan all vertices to find the minimum (O(V)), and we do this V times. With priority queue/heap, it can be reduced to O((V+E) log V).
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 8: CRC -->
            <div class="program-card c-card">
                <div class="program-header" onclick="toggleProgram('prog8')">
                    <div class="program-title">
                        <h3>8Ô∏è‚É£ CRC Error Detection</h3>
                        <span class="program-label c-label">C</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Polynomial Division</span>
                        <span class="concept-tag">XOR Operation</span>
                        <span class="concept-tag">Checksum</span>
                        <span class="concept-tag">Generator Polynomial</span>
                        <span class="concept-tag">Error Simulation</span>
                    </div>
                </div>
                <div class="program-content" id="prog8">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "XOR-Divide-Remainder")</h4>
                        <p><strong>Simple Idea:</strong> Append (n-1) zeros to data where n = length of generator polynomial. Divide using XOR. Remainder is checksum. Append checksum to data. Receiver divides again - if remainder is all zeros, no error.</p>
                        <p><strong>Pattern:</strong> Data + zeros ‚Üí XOR divide by generator ‚Üí Get remainder (CRC) ‚Üí Append CRC ‚Üí Send ‚Üí Receiver divides ‚Üí Check if zero</p>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">crc.c</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code8')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code8">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;string.h&gt;</span>

<span class="keyword">#define</span> N <span class="function">strlen</span>(g)  <span class="comment">// Length of generator polynomial</span>

<span class="keyword">char</span> t[<span class="number">28</span>], cs[<span class="number">28</span>], g[] = <span class="string">"1101"</span>;  <span class="comment">// Generator polynomial</span>
<span class="keyword">int</span> a, e, c;

<span class="keyword">void</span> <span class="tooltip">xor<span class="tooltiptext">Performs XOR operation: same bits = 0, different bits = 1</span></span>() {
    <span class="comment">// XOR: if bits are same ‚Üí 0, if different ‚Üí 1</span>
    <span class="keyword">for</span> (c = <span class="number">1</span>; c &lt; N; c++)
        cs[c] = (cs[c] == g[c]) ? <span class="string">'0'</span> : <span class="string">'1'</span>;
}

<span class="keyword">void</span> <span class="function">crc</span>() {
    <span class="comment">// Copy first N bits to checksum buffer</span>
    <span class="keyword">for</span> (e = <span class="number">0</span>; e &lt; N; e++)
        cs[e] = t[e];
    
    <span class="comment">// Polynomial division using XOR</span>
    <span class="keyword">do</span> {
        <span class="keyword">if</span> (cs[<span class="number">0</span>] == <span class="string">'1'</span>)  <span class="comment">// If MSB is 1, XOR with generator</span>
            <span class="function">xor</span>();
        
        <span class="comment">// Shift left and bring next bit</span>
        <span class="keyword">for</span> (c = <span class="number">0</span>; c &lt; N - <span class="number">1</span>; c++)
            cs[c] = cs[c + <span class="number">1</span>];
        
        cs[c] = t[e++];  <span class="comment">// Bring down next bit</span>
    } <span class="keyword">while</span> (e &lt;= a + N - <span class="number">1</span>);
    
    cs[c] = <span class="string">'\0'</span>;  <span class="comment">// Null-terminate</span>
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"Enter Data: "</span>);
    <span class="function">scanf</span>(<span class="string">"%s"</span>, t);
    
    <span class="function">printf</span>(<span class="string">"Generator Polynomial: %s\n"</span>, g);
    
    a = <span class="function">strlen</span>(t);
    
    <span class="comment">// Append (N-1) zeros to data</span>
    <span class="keyword">for</span> (e = a; e &lt; a + N - <span class="number">1</span>; e++)
        t[e] = <span class="string">'0'</span>;
    t[e] = <span class="string">'\0'</span>;
    
    <span class="function">printf</span>(<span class="string">"Modified data: %s\n"</span>, t);
    
    <span class="function">crc</span>();  <span class="comment">// Calculate checksum</span>
    <span class="function">printf</span>(<span class="string">"Checksum: %s\n"</span>, cs);
    
    <span class="comment">// Append checksum to data</span>
    <span class="keyword">for</span> (e = a; e &lt; a + N - <span class="number">1</span>; e++)
        t[e] = cs[e - a];
    t[e] = <span class="string">'\0'</span>;
    
    <span class="function">printf</span>(<span class="string">"Final Codeword: %s\n"</span>, t);
    
    <span class="comment">// Test error detection</span>
    <span class="keyword">int</span> test;
    <span class="function">printf</span>(<span class="string">"Test Error Detection? 0(YES) 1(NO): "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &test);
    
    <span class="keyword">if</span> (test == <span class="number">0</span>) {
        <span class="function">printf</span>(<span class="string">"Enter position to insert error: "</span>);
        <span class="function">scanf</span>(<span class="string">"%d"</span>, &e);
        
        <span class="comment">// Flip bit at position e</span>
        t[e - <span class="number">1</span>] = (t[e - <span class="number">1</span>] == <span class="string">'0'</span>) ? <span class="string">'1'</span> : <span class="string">'0'</span>;
        <span class="function">printf</span>(<span class="string">"Erroneous Data: %s\n"</span>, t);
        
        <span class="function">crc</span>();  <span class="comment">// Check again</span>
        
        <span class="comment">// If checksum is not all zeros, error detected</span>
        <span class="keyword">for</span> (e = <span class="number">0</span>; (e &lt; N - <span class="number">1</span>) && (cs[e] != <span class="string">'1'</span>); e++);
        
        <span class="keyword">if</span> (e &lt; N - <span class="number">1</span>)
            <span class="function">printf</span>(<span class="string">"Error Detected\n"</span>);
        <span class="keyword">else</span>
            <span class="function">printf</span>(<span class="string">"No Error Detected\n"</span>);
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: How many zeros are appended to the data before CRC calculation?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint8')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint8">
                            <strong>Answer:</strong> (N-1) zeros are appended, where N is the length of the generator polynomial. For generator "1101" (length 4), we append 3 zeros. This makes room for the checksum remainder.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 9: Protocols -->
            <div class="program-card c-card">
                <div class="program-header" onclick="toggleProgram('prog9')">
                    <div class="program-title">
                        <h3>9Ô∏è‚É£ Stop-and-Wait &amp; Sliding Window</h3>
                        <span class="program-label c-label">C</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Acknowledgements</span>
                        <span class="concept-tag">Window Size</span>
                        <span class="concept-tag">Timeout &amp; Retransmission</span>
                        <span class="concept-tag">Round Trip Time</span>
                        <span class="concept-tag">Flow Control</span>
                    </div>
                </div>
                <div class="program-content" id="prog9">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Send-Wait vs Send-Window")</h4>
                        <p><strong>Simple Idea:</strong> Two protocols - (1) Stop-and-Wait: Send one frame, wait for ACK, if timeout ‚Üí resend. Low throughput. (2) Sliding Window: Send multiple frames (window size), wait for ACK after window full. Better throughput.</p>
                        <p><strong>Pattern:</strong> S&W: Loop ‚Üí Send 1 ‚Üí Wait ACK ‚Üí Next | SW: Loop ‚Üí Send window frames ‚Üí Wait ACK ‚Üí Slide window</p>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">Stop and Wait</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code9')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code9">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;stdlib.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;unistd.h&gt;</span>

<span class="keyword">#define</span> <span class="tooltip">RTT<span class="tooltiptext">Round Trip Time - time for frame to reach destination and ACK to return</span></span> <span class="number">4</span>
<span class="keyword">#define</span> <span class="tooltip">TIMEOUT<span class="tooltiptext">Maximum wait time before retransmission</span></span> <span class="number">4</span>
<span class="keyword">#define</span> TOTAL_NO_FRAMES <span class="number">7</span>

<span class="keyword">enum</span> { NO, YES } ACK;

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> wait_time, i = <span class="number">1</span>;
    ACK = YES;
    
    <span class="keyword">for</span> (; i &lt;= TOTAL_NO_FRAMES;) {
        <span class="keyword">if</span> (ACK == YES && i != <span class="number">1</span>)
            <span class="function">printf</span>(<span class="string">"\nSENDER: ACK for Frame %d Received.\n"</span>, i - <span class="number">1</span>);
        
        <span class="comment">// Send frame</span>
        <span class="function">printf</span>(<span class="string">"\nSENDER: Frame %d sent, Waiting for ACK...\n"</span>, i);
        ACK = NO;
        
        <span class="comment">// Simulate random wait time</span>
        wait_time = <span class="function">rand</span>() % <span class="number">4</span> + <span class="number">1</span>;
        
        <span class="keyword">if</span> (wait_time == TIMEOUT) {
            <span class="comment">// TIMEOUT! Resend frame</span>
            <span class="function">printf</span>(<span class="string">"SENDER: TIMEOUT for Frame %d. Resending...\n"</span>, i);
        } <span class="keyword">else</span> {
            <span class="comment">// ACK received</span>
            <span class="function">sleep</span>(RTT / <span class="number">2</span>);
            <span class="function">printf</span>(<span class="string">"\nRECEIVER: Frame %d received, ACK sent\n"</span>, i);
            <span class="function">printf</span>(<span class="string">"--------------------------------------------\n"</span>);
            ACK = YES;
            <span class="function">sleep</span>(RTT / <span class="number">2</span>);
            i++;  <span class="comment">// Move to next frame only on success</span>
        }
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">Sliding Window</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code9sw')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code9sw">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">#include</span> <span class="string">&lt;unistd.h&gt;</span>

<span class="keyword">#define</span> RTT <span class="number">5</span>

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> window_size, i, f, frames[<span class="number">50</span>];
    
    <span class="function">printf</span>(<span class="string">"Enter window size: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &window_size);
    
    <span class="function">printf</span>(<span class="string">"Enter number of frames: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &f);
    
    <span class="function">printf</span>(<span class="string">"Enter %d frames: "</span>, f);
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= f; i++)
        <span class="function">scanf</span>(<span class="string">"%d"</span>, &frames[i]);
    
    <span class="function">printf</span>(<span class="string">"\nAfter sending %d frames, sender waits for ACK\n"</span>, window_size);
    <span class="function">printf</span>(<span class="string">"Sending frames...\n\n"</span>);
    
    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= f; i++) {
        <span class="keyword">if</span> (i % window_size != <span class="number">0</span>) {
            <span class="comment">// Send frame (within window)</span>
            <span class="function">printf</span>(<span class="string">" %d"</span>, frames[i]);
        } <span class="keyword">else</span> {
            <span class="comment">// Window full - wait for ACK</span>
            <span class="function">printf</span>(<span class="string">" %d\n"</span>, frames[i]);
            <span class="function">printf</span>(<span class="string">"SENDER: Waiting for ACK...\n"</span>);
            <span class="function">sleep</span>(RTT / <span class="number">2</span>);
            <span class="function">printf</span>(<span class="string">"RECEIVER: Frames Received, ACK sent\n"</span>);
            <span class="function">printf</span>(<span class="string">"--------------------------------------\n"</span>);
            <span class="function">sleep</span>(RTT / <span class="number">2</span>);
            <span class="function">printf</span>(<span class="string">"SENDER: ACK received, sending next frames\n"</span>);
        }
    }
    
    <span class="comment">// Handle remaining frames (not divisible by window_size)</span>
    <span class="keyword">if</span> (f % window_size != <span class="number">0</span>) {
        <span class="function">printf</span>(<span class="string">"\nSENDER: Waiting for ACK...\n"</span>);
        <span class="function">sleep</span>(RTT / <span class="number">2</span>);
        <span class="function">printf</span>(<span class="string">"RECEIVER: Frames Received, ACK Sent\n"</span>);
        <span class="function">printf</span>(<span class="string">"-------------------------------------------------\n"</span>);
        <span class="function">sleep</span>(RTT / <span class="number">2</span>);
        <span class="function">printf</span>(<span class="string">"SENDER: ACK received.\n"</span>);
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What is the main advantage of Sliding Window over Stop-and-Wait?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint9')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint9">
                            <strong>Answer:</strong> Sliding Window has much higher throughput because it can send multiple frames before waiting for ACK, keeping the channel utilized. Stop-and-Wait wastes bandwidth as the channel stays idle while waiting for each ACK.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Program 10: Congestion Control -->
            <div class="program-card c-card">
                <div class="program-header" onclick="toggleProgram('prog10')">
                    <div class="program-title">
                        <h3>üîü Leaky Bucket Algorithm</h3>
                        <span class="program-label c-label">C</span>
                    </div>
                    <span class="expand-icon">‚ñº</span>
                </div>
                <div class="concept-map">
                    <h4>üìå Concept Map:</h4>
                    <div class="concept-tags">
                        <span class="concept-tag">Traffic Shaping</span>
                        <span class="concept-tag">Fixed Output Rate</span>
                        <span class="concept-tag">Bucket Capacity</span>
                        <span class="concept-tag">Packet Drops</span>
                        <span class="concept-tag">Congestion Control</span>
                    </div>
                </div>
                <div class="program-content" id="prog10">
                    <div class="explanation">
                        <h4>üí° Memory Aid (Mnemonic: "Fill-Leak-Drop")</h4>
                        <p><strong>Simple Idea:</strong> Imagine a bucket with a hole. Packets arrive at varying rates (fill bucket). Packets leave at fixed rate (leak from hole). If bucket overflows ‚Üí drop packets. Controls bursty traffic by smoothing output.</p>
                        <p><strong>Pattern:</strong> Each second: Add incoming packets ‚Üí If exceeds capacity, drop excess ‚Üí Process at fixed rate ‚Üí Update bucket level</p>
                    </div>

                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-label-group">
                                <span class="code-type">C PROGRAM</span>
                                <span class="code-type">leaky_bucket.c</span>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleFlashcard('code10')">Toggle Code</button>
                        </div>
                        <div class="code-box" id="code10">
                            <pre><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="keyword">int</span> <span class="function">min</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> y) {
    <span class="keyword">return</span> (x &lt; y) ? x : y;
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> imp[<span class="number">25</span>], drop = <span class="number">0</span>, count = <span class="number">0</span>, process, mini, cap, nsec, i;
    
    <span class="function">printf</span>(<span class="string">"Enter bucket size: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &cap);
    
    <span class="function">printf</span>(<span class="string">"Enter processing rate (packets/sec): "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &process);
    
    <span class="function">printf</span>(<span class="string">"Enter number of seconds: "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &nsec);
    
    <span class="comment">// Get input packets for each second</span>
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; nsec; i++) {
        <span class="function">printf</span>(<span class="string">"Packets at second %d: "</span>, i + <span class="number">1</span>);
        <span class="function">scanf</span>(<span class="string">"%d"</span>, &imp[i]);
    }
    
    <span class="function">printf</span>(<span class="string">"\nSeconds | Received | Sent | Left | Dropped\n"</span>);
    <span class="function">printf</span>(<span class="string">"----------------------------------------------\n"</span>);
    
    <span class="comment">// Process each second</span>
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; nsec; i++) {
        <span class="comment">// Add incoming packets to bucket</span>
        count += imp[i];
        
        <span class="comment">// Check for overflow (bucket capacity exceeded)</span>
        <span class="keyword">if</span> (count &gt; cap) {
            drop = count - cap;  <span class="comment">// DROP excess!</span>
            count = cap;          <span class="comment">// Limit to capacity</span>
        }
        
        <span class="comment">// Process packets (leak from bucket)</span>
        mini = <span class="tooltip">min<span class="tooltiptext">Takes minimum of bucket count and processing rate - can't process more than available</span></span>(count, process);
        count -= mini;  <span class="comment">// Remove processed packets</span>
        
        <span class="function">printf</span>(<span class="string">"%7d | %8d | %4d | %4d | %7d\n"</span>, 
               i + <span class="number">1</span>, imp[i], mini, count, drop);
        
        drop = <span class="number">0</span>;  <span class="comment">// Reset drop counter</span>
    }
    
    <span class="comment">// Continue processing remaining packets after input ends</span>
    <span class="keyword">for</span> (; count != <span class="number">0</span>; i++) {
        <span class="keyword">if</span> (count &gt; cap) {
            drop = count - cap;
            count = cap;
        }
        
        mini = <span class="function">min</span>(count, process);
        count -= mini;
        
        <span class="function">printf</span>(<span class="string">"%7d | %8d | %4d | %4d | %7d\n"</span>, 
               i + <span class="number">1</span>, <span class="number">0</span>, mini, count, drop);
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <h4>üß† Try to Recall:</h4>
                        <p class="quiz-question">Q: What happens when packets arrive faster than the processing rate in Leaky Bucket?</p>
                        <button class="btn btn-primary" onclick="toggleHint('hint10')">Show/Hide Hint</button>
                        <div class="quiz-hint" id="hint10">
                            <strong>Answer:</strong> The bucket accumulates packets up to its capacity. Once capacity is exceeded, additional incoming packets are dropped. The output rate remains constant (fixed processing rate), smoothing out bursty traffic but losing excess packets.
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Flashcard Controls -->
        <div class="flashcard-controls">
            <button class="btn btn-success" onclick="toggleAllCodes()">Toggle All Code Blocks</button>
            <button class="btn btn-primary" onclick="toggleAllExplanations()">Toggle All Explanations</button>
        </div>

    </div>

    <script>
        // Toggle individual program expansion
        function toggleProgram(id) {
            const content = document.getElementById(id);
            const card = content.closest('.program-card');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                card.classList.remove('expanded');
            } else {
                content.classList.add('show');
                card.classList.add('expanded');
            }
        }

        // Toggle quiz hints
        function toggleHint(id) {
            const hint = document.getElementById(id);
            hint.classList.toggle('show');
        }

        // Toggle individual code/flashcard
        function toggleFlashcard(id) {
            const element = document.getElementById(id);
            element.classList.toggle('hidden-content');
        }

        // Toggle all code blocks
        function toggleAllCodes() {
            const codes = document.querySelectorAll('.code-box');
            codes.forEach(code => {
                code.classList.toggle('hidden-content');
            });
        }

        // Toggle all explanations
        function toggleAllExplanations() {
            const explanations = document.querySelectorAll('.explanation');
            explanations.forEach(exp => {
                exp.classList.toggle('hidden-content');
            });
        }

        // Toggle Tools Panel
        function toggleToolsPanel() {
            const panel = document.getElementById('toolsPanel');
            const overlay = document.getElementById('panelOverlay');
            panel.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Toggle Theme
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            
            // Update toggle checkbox
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.checked = (newTheme === 'dark');
            
            // Save preference
            localStorage.setItem('theme', newTheme);
        }

        // Apply Display Options from Tools Panel
        function applyDisplayOptions() {
            const showCode = document.getElementById('showCode').checked;
            const showComments = document.getElementById('showComments').checked;
            const showExplanations = document.getElementById('showExplanations').checked;
            const showQuestions = document.getElementById('showQuestions').checked;

            // Show/hide code blocks
            document.querySelectorAll('.code-container').forEach(container => {
                container.style.display = showCode ? 'block' : 'none';
            });

            // Show/hide comments in code
            document.querySelectorAll('.comment').forEach(comment => {
                comment.style.display = showComments ? 'inline' : 'none';
            });

            // Show/hide explanations
            document.querySelectorAll('.explanation').forEach(exp => {
                exp.style.display = showExplanations ? 'block' : 'none';
            });

            // Show/hide quiz sections
            document.querySelectorAll('.quiz-section').forEach(quiz => {
                quiz.style.display = showQuestions ? 'block' : 'none';
            });
        }

        // Apply Viva Options
        function applyVivaOptions() {
            const showAnswers = document.getElementById('showVivaAnswers').checked;
            
            // Toggle visibility of quiz hints based on showAnswers
            document.querySelectorAll('.quiz-hint').forEach(hint => {
                if (showAnswers) {
                    hint.classList.add('show');
                } else {
                    hint.classList.remove('show');
                }
            });
        }

        // Keyboard Shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + K: Toggle Tools Panel
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                toggleToolsPanel();
            }
            
            // Esc: Close Tools Panel
            if (e.key === 'Escape') {
                const panel = document.getElementById('toolsPanel');
                const overlay = document.getElementById('panelOverlay');
                if (panel.classList.contains('open')) {
                    panel.classList.remove('open');
                    overlay.classList.remove('active');
                }
            }
            
            // Ctrl/Cmd + T: Toggle Theme
            if ((e.ctrlKey || e.metaKey) && e.key === 't') {
                e.preventDefault();
                toggleTheme();
            }
        });

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Network Programming Study Companion loaded successfully!');
            
            // Load saved theme preference
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeToggle').checked = (savedTheme === 'dark');
            
            // Initialize display options
            applyDisplayOptions();
            applyVivaOptions();
        });
    </script>
</body>
</html>

