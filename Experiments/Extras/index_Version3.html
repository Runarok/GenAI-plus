<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GitHub/Pages Link Analyzer</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    input { width: 450px; padding: 0.5em; }
    .output { margin-top: 1em; }
    label { display: block; margin-bottom: 0.5em; }
    .error { color: red; }
    .url { word-break: break-all; }
  </style>
</head>
<body>
  <h2>GitHub â†” GitHub Pages Link Analyzer</h2>
  <label for="link">Enter any GitHub repository, Pages, file, or folder link:</label>
  <input type="text" id="link" placeholder="Paste a GitHub or GitHub Pages link here">
  <button onclick="analyze()">Analyze</button>
  <div class="output">
    <div>
      <strong>GitHub Repository:</strong>
      <span class="url" id="repoLink"></span>
    </div>
    <div>
      <strong>GitHub Pages:</strong>
      <span class="url" id="pagesLink"></span>
    </div>
    <div>
      <strong>GitHub Pages (Subpath, if applicable):</strong>
      <span class="url" id="pagesSubLink"></span>
    </div>
    <div class="error" id="error"></div>
  </div>
  <script>
    function analyze() {
      const input = document.getElementById('link').value.trim();
      const repoEl = document.getElementById('repoLink');
      const pagesEl = document.getElementById('pagesLink');
      const pagesSubEl = document.getElementById('pagesSubLink');
      const errorEl = document.getElementById('error');
      repoEl.innerHTML = '';
      pagesEl.innerHTML = '';
      pagesSubEl.innerHTML = '';
      errorEl.innerHTML = '';

      let user = '', repo = '', subPath = '', isPages = false;
      try {
        const url = new URL(input);

        // Handle github.com URLs
        if (url.hostname === 'github.com') {
          // /user/repo
          // /user/repo/
          // /user/repo/blob/branch/path...
          // /user/repo/tree/branch/path...
          const parts = url.pathname.split('/').filter(Boolean);
          if (parts.length < 2) throw new Error('Invalid GitHub repository link!');
          user = parts[0];
          repo = parts[1];

          // Check for blob/tree and extract path after branch
          if (parts[2] === 'blob' || parts[2] === 'tree') {
            // e.g. /user/repo/blob/main/path/to/file
            //       0    1     2    3    4...
            if (parts.length >= 5) {
              subPath = parts.slice(4).join('/');
            }
          }
        }
        // Handle GitHub Pages URLs
        else if (/^[^.]+\.github\.io$/.test(url.hostname)) {
          isPages = true;
          user = url.hostname.split('.')[0];
          const parts = url.pathname.split('/').filter(Boolean);
          if (parts.length < 1) throw new Error('Invalid GitHub Pages link!');
          repo = parts[0];
          if (parts.length > 1) {
            subPath = parts.slice(1).join('/');
          }
        } else {
          throw new Error('Link must be a github.com or github.io URL!');
        }

        // Compose canonical links
        const repoURL = `https://github.com/${user}/${repo}`;
        const pagesURL = `https://${user}.github.io/${repo}`;
        let pagesSubURL = '';

        if (subPath) {
          pagesSubURL = `${pagesURL}/${subPath}`;
        }

        repoEl.innerHTML = `<a href="${repoURL}" target="_blank">${repoURL}</a>`;
        pagesEl.innerHTML = `<a href="${pagesURL}" target="_blank">${pagesURL}</a>`;
        pagesSubEl.innerHTML = pagesSubURL ? `<a href="${pagesSubURL}" target="_blank">${pagesSubURL}</a>` : '<em>Not applicable</em>';
      } catch (e) {
        errorEl.textContent = e.message;
      }
    }
  </script>
</body>
</html>