<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Birthday Card</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary-accent: #ff4081;
      --card-radius: 20px;
      --shadow-dark: 0 10px 50px rgba(0,0,0,0.8);
      --shadow-light: 0 8px 32px rgba(255,64,129,0.10);
    }
    html, body {
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', 'Arial', sans-serif;
      background: linear-gradient(135deg, #232526 0%, #1c1c1c 100%);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      transition: background 0.6s, color 0.6s;
    }
    body.light {
      background: linear-gradient(135deg, #fffbe6 0%, #f2f2f2 100%);
      color: #2b2b2b;
    }
    .container {
      text-align: center;
      width: 100%;
      max-width: 460px;
      padding: 1em 0.7em;
    }
    .input-section, .card-section {
      display: none;
      margin: 0 auto;
      width: 100%;
      max-width: 420px;
    }
    .input-section {
      display: block;
      background: rgba(30,30,30,0.87);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow-dark);
      padding: 2em 1.2em 1.6em 1.2em;
      margin-bottom: 1em;
      transition: background 0.5s, box-shadow 0.5s;
    }
    body.light .input-section {
      background: #fff;
      box-shadow: var(--shadow-light);
    }
    .input-section h1 {
      font-size: 2.2em;
      margin-bottom: 22px;
      letter-spacing: 0.01em;
      color: var(--primary-accent);
      font-family: 'Pacifico', cursive, 'Comic Sans MS', cursive;
    }
    .input-section .row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.7em;
      justify-content: center;
      align-items: center;
      margin-bottom: 14px;
    }
    .input-section input {
      padding: 13px;
      font-size: 19px;
      border: 2px solid #c0c0c0;
      background: #292929;
      color: #fff;
      border-radius: 7px;
      width: 100%;
      min-width: 0;
      text-align: center;
      outline: none;
      transition: border 0.3s, background 0.4s, color 0.4s;
      appearance: none;
      flex: 1 1 auto;
    }
    .input-section input:focus {
      border: 2px solid var(--primary-accent);
    }
    body.light .input-section input {
      background: #fffbe6;
      color: #222;
      border-color: #eee;
    }
    .input-section button {
      padding: 12px 32px;
      font-size: 20px;
      background-color: var(--primary-accent);
      color: #fff;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 11px;
      margin-right: 0.8em;
      font-weight: bold;
      letter-spacing: 0.04em;
      transition: background 0.3s;
      box-shadow: 0 2px 16px rgba(255,64,129,0.10);
      display: inline-block;
    }
    .input-section button:last-child {
      margin-right: 0;
    }
    .input-section button:hover {
      background-color: #ff85b3;
    }
    .theme-popup-btn {
      background: #222;
      color: var(--primary-accent);
      border: 2px solid var(--primary-accent);
      padding: 10px 18px;
      font-size: 1.1em;
      border-radius: 8px;
      margin-left: 0.5em;
      cursor: pointer;
      transition: background 0.25s, color 0.25s;
    }
    body.light .theme-popup-btn {
      background: #fffbe6;
      color: var(--primary-accent);
      border: 2px solid var(--primary-accent);
    }
    .theme-popup-btn:hover {
      background: var(--primary-accent);
      color: #fff;
    }
    #themePreview {
      margin-left: 0.8em;
      font-size: 1.05em;
      min-width: 110px;
      display: inline-block;
      vertical-align: middle;
      font-weight: 600;
      letter-spacing: 0.04em;
    }
    /* Toast Notification Styles */
    .toast {
      visibility: hidden;
      position: fixed;
      z-index: 9999;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #232323;
      color: #fff;
      text-align: center;
      border-radius: 7px;
      padding: 12px 26px;
      font-size: 20px;
      line-height: 1.5;
      box-shadow: 0 4px 6px rgba(0,0,0,0.5);
      opacity: 0;
      transition: opacity 0.6s, visibility 0.6s;
      width: auto;
      max-width: 80vw;
    }
    .toast.show {
      visibility: visible;
      opacity: 1;
    }
    body.light .toast {
      background: #fffbe6;
      color: #222;
      box-shadow: 0 4px 12px rgba(255,64,129,0.07);
    }
    /* Birthday Card Design */
    .card {
      background-color: #1e1e1e;
      padding: 38px 25px 30px 25px;
      border-radius: var(--card-radius);
      box-shadow: var(--shadow-dark);
      text-align: center;
      animation: cardAnimation 0.8s cubic-bezier(0.22,1,0.36,1);
      max-width: 99vw;
      margin: 0 auto;
      position: relative;
      transition: background 0.5s, box-shadow 0.5s;
    }
    body.light .card {
      background-color: #fff;
      box-shadow: var(--shadow-light);
    }
    .card h1 {
      font-size: 2.2em;
      margin-bottom: 15px;
      color: var(--primary-accent);
      animation: fadeInTitle 0.8s cubic-bezier(0.22,1,0.36,1);
      font-family: 'Pacifico', cursive, 'Comic Sans MS', cursive;
      letter-spacing: 0.03em;
    }
    .card p {
      font-size: 1.35em;
      margin-top: 10px;
      color: #e0e0e0;
      animation: fadeInText 1.1s cubic-bezier(0.22,1,0.36,1);
      transition: color 0.5s;
    }
    body.light .card p {
      color: #3c3c3c;
    }
    .card img {
      width: 266px;
      margin-top: 22px;
      border-radius: 13px;
      animation: bounceIn 1s cubic-bezier(0.22,1,0.36,1);
      box-shadow: 0 2px 16px rgba(255,64,129,0.15);
      background: #fff1;
      max-width: 95vw;
      display: block;
    }
    @keyframes cardAnimation {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes fadeInTitle {
      0% { opacity: 0; transform: translateY(-24px);}
      100% { opacity: 1; transform: translateY(0);}
    }
    @keyframes fadeInText {
      0% { opacity: 0; transform: translateY(20px);}
      100% { opacity: 1; transform: translateY(0);}
    }
    @keyframes bounceIn {
      0% { transform: scale(0.7) translateY(35px); opacity: 0; }
      80% { transform: scale(1.08) translateY(-10px); opacity: 0.95; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }
    @media (max-width: 600px) {
      .card img { width: 97vw; max-width: 320px;}
      .card { padding: 18px 3vw 16px 3vw;}
      .input-section input { width: 99%; }
      .container { padding: 0.7em 0.1em; }
    }
    /* Theme Popup Modal */
    .theme-modal-bg, .quote-modal-bg {
      position: fixed;
      z-index: 10000;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      align-items: center;
      justify-content: center;
    }
    .theme-modal-bg.active, .quote-modal-bg.active {
      display: flex;
    }
    .theme-modal, .quote-modal {
      background: #222;
      padding: 2em 2em 1.3em 2em;
      border-radius: 18px;
      min-width: 265px;
      text-align: center;
      color: #fff;
      box-shadow: 0 4px 32px #0007;
      position: relative;
      transition: background 0.4s, color 0.4s;
    }
    .theme-modal.light, .quote-modal.light {
      background: #fff;
      color: #232526;
    }
    .theme-modal .modal-title, .quote-modal .modal-title {
      font-size: 1.35em;
      font-weight: bold;
      margin-bottom: 0.9em;
      letter-spacing: 0.03em;
      color: var(--primary-accent);
    }
    .theme-modal .modal-row {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 1.1em;
      gap: 1em;
    }
    .theme-modal .modal-row:last-child {
      margin-bottom: 0.3em;
    }
    .theme-modal .theme-btn {
      border: 2px solid #fff2;
      border-radius: 7px;
      background: #181818;
      color: #fff;
      padding: 7px 18px;
      cursor: pointer;
      font-size: 1.08em;
      min-width: 80px;
      margin: 0 0.4em;
      transition: background 0.22s, color 0.22s, border 0.22s;
    }
    .theme-modal.light .theme-btn {
      background: #f7f7f7;
      color: #232526;
      border: 2px solid #ddd;
    }
    .theme-modal .theme-btn.selected {
      border: 2px solid var(--primary-accent);
      background: #2b2b2b;
      color: var(--primary-accent);
    }
    .theme-modal.light .theme-btn.selected {
      background: #fbeafd;
      color: var(--primary-accent);
    }
    .theme-modal .color-palette {
      display: flex;
      flex-wrap: wrap;
      gap: 0.55em;
      justify-content: center;
      align-items: center;
      margin: 0.7em 0 0.2em 0;
    }
    .theme-modal .color-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2.5px solid #fff8;
      cursor: pointer;
      transition: border 0.19s;
      box-sizing: border-box;
      outline: none;
      display: inline-block;
    }
    .theme-modal.light .color-circle {
      border: 2.5px solid #ddd;
    }
    .theme-modal .color-circle.selected {
      border: 3px solid var(--primary-accent);
      outline: 2.5px solid #ffbebe;
    }
    .theme-modal .modal-actions, .quote-modal .modal-actions {
      margin-top: 1.5em;
      display: flex;
      gap: 1em;
      justify-content: center;
    }
    .theme-modal .modal-close, .quote-modal .modal-close {
      position: absolute;
      top: 0.8em;
      right: 1em;
      background: none;
      border: none;
      color: #fff;
      font-size: 1.5em;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.19s;
    }
    .theme-modal.light .modal-close, .quote-modal.light .modal-close {
      color: #232526;
    }
    .theme-modal .modal-close:hover, .quote-modal .modal-close:hover {
      opacity: 1;
    }
    /* Quote Modal */
    .quote-modal .quote-list {
      max-height: 240px;
      overflow-y: auto;
      margin-bottom: 1.1em;
      margin-top: 0.7em;
      text-align: left;
      padding: 0 0.1em;
    }
    .quote-modal .quote-option {
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      padding: 0.6em 0.7em;
      border-radius: 7px;
      font-size: 1.1em;
      transition: background 0.15s, color 0.15s;
      cursor: pointer;
      margin-bottom: 0.2em;
      color: inherit;
      outline: none;
      border: 2px solid transparent;
    }
    .quote-modal .quote-option.selected,
    .quote-modal .quote-option:focus {
      background: var(--primary-accent);
      color: #fff;
      border: 2px solid var(--primary-accent);
    }
    .quote-modal.light .quote-option.selected,
    .quote-modal.light .quote-option:focus {
      background: #fbeafd;
      color: var(--primary-accent);
      border: 2px solid var(--primary-accent);
    }
    .quote-modal .quote-option.random {
      font-weight: bold;
      color: var(--primary-accent);
      border: 2px solid var(--primary-accent);
    }

  </style>
  <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
</head>
<body>
<div class="container">
  <div id="inputSection" class="input">
    <h1>Birthday Card Generator</h1>
    <input id="name" type="text" maxlength="36" placeholder="Recipient Name"><br>
    <div class="selects">
      <select id="quoteSel"></select>
      <select id="themeSel">
        <option value="dark">Dark</option>
        <option value="light">Light</option>
      </select>
      <span class="colors" id="accentDots"></span>
    </div>
    <button id="copyBtn">Copy Link</button>
    <button id="previewBtn">Preview</button>
  </div>
  <div id="cardSection" class="card" style="display:none;">
    <h1 id="cardTitle"></h1>
    <p id="cardMsg"></p>
    <img id="cardImg" src="" style="display:none;">
  </div>
  <div id="toast" class="toast"></div>
</div>
<script>
const quotes = [
  "Wishing you a day filled with happiness and a year filled with joy!",
  "May your birthday be the start of a year filled with good luck, good health, and much happiness.",
  "Happy Birthday! May your day be filled with love, laughter, and joy!",
  "On your special day, may you be surrounded by love and happiness! Enjoy every moment!",
  "Sending you smiles for every moment of your special day… Have a wonderful time and a very happy birthday!",
  "Cheers to you and your incredible journey ahead. Have a fantastic birthday!",
  "Here's to another year of making beautiful memories! Happy Birthday!",
  "May your heart be filled with joy and laughter on your special day. Happy Birthday!",
  "On your birthday, may the sun shine as brightly as your spirit. Enjoy every moment!",
  "Wishing you a year full of love, adventure, and endless possibilities. Happy Birthday!",
  "Birthdays are nature’s way of telling us to eat more cake! Have a sweet and delightful day!",
  "Your birthday is the perfect time to remind you how much you are loved. Have a wonderful day!",
  "Wishing you a lifetime of happiness, peace, and prosperity. Happy Birthday!",
  "May your birthday be filled with all your favorite things and surrounded by the ones you love. Enjoy!",
  "Blow out the candles and make a wish. Happy Birthday!"
];
const images = [
  "https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=640&q=80",
  "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=640&q=80",
  "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=640&q=80",
  "https://images.unsplash.com/photo-1503676382389-4809596d5290?auto=format&fit=crop&w=640&q=80",
  "https://cdn.pixabay.com/photo/2017/01/31/13/14/birthday-2028658_1280.png",
  "https://cdn.pixabay.com/photo/2014/12/21/23/50/birthday-579520_1280.png",
  "https://cdn.pixabay.com/photo/2016/03/23/17/33/birthday-1276269_1280.png",
  "https://images.pexels.com/photos/2072181/pexels-photo-2072181.jpeg?auto=compress&w=640&h=427&fit=crop",
  "https://images.pexels.com/photos/796602/pexels-photo-796602.jpeg?auto=compress&w=640&h=427&fit=crop",
  "https://images.pexels.com/photos/1721938/pexels-photo-1721938.jpeg?auto=compress&w=640&h=427&fit=crop"
];
const accents = [
  {name:'Pink', hex:'#ff4081'}, {name:'Blue',hex:'#6c63ff'}, {name:'Green',hex:'#00b894'},
  {name:'Yellow',hex:'#ffee58'}, {name:'Orange',hex:'#ffb74d'}, {name:'Purple',hex:'#a29bfe'},
  {name:'Red',hex:'#ff5252'}, {name:'Teal',hex:'#1de9b6'}
];
function b64e(str){return btoa(unescape(encodeURIComponent(str))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');}
function b64d(str){str=str.replace(/-/g,'+').replace(/_/g,'/');while(str.length%4)str+='=';return decodeURIComponent(escape(atob(str)));}
function encode(state){return b64e(JSON.stringify(state));}
function decode(hash){try{return JSON.parse(b64d(hash))}catch(e){return null};}

function setAccent(idx){document.documentElement.style.setProperty('--primary-accent',accents[idx].hex);}
function setTheme(base,accentIdx){document.body.className=base;setAccent(accentIdx);}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1800);}

function showMenu(){
  document.getElementById('inputSection').style.display = "";
  document.getElementById('cardSection').style.display = "none";
}
function showCard(name, quoteIdx, themeObj){
  setTheme(themeObj.base, themeObj.accent);
  document.getElementById('inputSection').style.display = "none";
  document.getElementById('cardSection').style.display = "";
  document.getElementById('cardTitle').textContent = `Happy Birthday, ${name}!`;
  let q = (typeof quoteIdx === "number" && quoteIdx >= 0 && quoteIdx < quotes.length) ? quotes[quoteIdx] : quotes[Math.floor(Math.random()*quotes.length)];
  document.getElementById('cardMsg').textContent = q;
  let img = document.getElementById('cardImg');
  let src = images[Math.floor(Math.random()*images.length)];
  img.style.display = "none";
  img.onload = ()=>{img.style.display="block";};
  img.src = src;
}

function initMenu(){
  let quoteSel = document.getElementById('quoteSel');
  quoteSel.innerHTML = `<option value="r">🎲 Random Quote</option>`+quotes.map((q,i)=>`<option value="${i}">${(i+1)+". "+q.slice(0,40)+(q.length>40?"...":"")}</option>`).join('');
  let themeSel = document.getElementById('themeSel');
  let accentDots = document.getElementById('accentDots');
  accentDots.innerHTML = '';
  accents.forEach((a,i)=>{
    let d=document.createElement('span');
    d.className='dot'+(i==0?' selected':'');
    d.style.background=a.hex;
    d.title=a.name;
    d.onclick=()=>{
      Array.from(accentDots.children).forEach(c=>c.classList.remove('selected'));
      d.classList.add('selected');
      setAccent(i);
      accentDots.setAttribute('data-accent',i);
    };
    accentDots.appendChild(d);
  });
  setAccent(0);
  accentDots.setAttribute('data-accent',0);

  themeSel.onchange = ()=> setTheme(themeSel.value, parseInt(accentDots.getAttribute('data-accent')));
}

function getStateFromMenu(){
  let name = document.getElementById('name').value.trim();
  let quoteVal = document.getElementById('quoteSel').value;
  let quote = quoteVal === "r" ? null : parseInt(quoteVal,10);
  let base = document.getElementById('themeSel').value;
  let accent = parseInt(document.getElementById('accentDots').getAttribute('data-accent'));
  return {name, quote, theme:{base, accent}};
}

function setMenuFromState(state){
  document.getElementById('name').value = state.name;
  document.getElementById('themeSel').value = state.theme.base;
  let accentDots = document.getElementById('accentDots');
  Array.from(accentDots.children).forEach((c,i)=>{
    c.classList.toggle('selected',i===state.theme.accent);
  });
  accentDots.setAttribute('data-accent',state.theme.accent);
  setAccent(state.theme.accent);
  document.getElementById('quoteSel').value = (state.quote === null || typeof state.quote==="undefined") ? "r" : state.quote;
  setTheme(state.theme.base, state.theme.accent);
}

window.onload = function(){
  // If hash present, show card; else show menu
  let hash = location.hash.replace(/^#/,'');
  let previewMode = !!window.location.search;
  let data = hash && decode(hash);
  if(data && data.name){
    // Hide input, show card
    document.getElementById('inputSection').style.display = "none";
    document.getElementById('cardSection').style.display = "";
    setTheme(data.theme.base, data.theme.accent);
    document.getElementById('cardTitle').textContent = `Happy Birthday, ${data.name}!`;
    let q = (typeof data.quote === "number" && data.quote >= 0 && data.quote < quotes.length) ? quotes[data.quote] : quotes[Math.floor(Math.random()*quotes.length)];
    document.getElementById('cardMsg').textContent = q;
    let img = document.getElementById('cardImg');
    let src = images[Math.floor(Math.random()*images.length)];
    img.style.display = "none";
    img.onload = ()=>{img.style.display="block";};
    img.src = src;
    // Remove menu elements in preview mode (for sharing)
    if(previewMode){
      document.body.innerHTML = document.getElementById('cardSection').outerHTML;
      setTheme(data.theme.base, data.theme.accent);
    }
    return;
  }
  // Show menu
  showMenu();
  initMenu();
  document.getElementById('copyBtn').onclick = function(){
    let s = getStateFromMenu();
    if(!s.name) return showToast("Please enter a name!");
    let url = window.location.origin+window.location.pathname+"#"+encode(s);
    navigator.clipboard.writeText(url).then(()=>showToast("Link copied!"));
  };
  document.getElementById('previewBtn').onclick = function(){
    let s = getStateFromMenu();
    if(!s.name) return showToast("Please enter a name!");
    let url = window.location.origin+window.location.pathname+"?t#"+encode(s);
    window.open(url,"_blank");
  };
  document.getElementById('quoteSel').onchange = ()=>{}; // For custom logic if needed
};

</script>
</body>
</html>